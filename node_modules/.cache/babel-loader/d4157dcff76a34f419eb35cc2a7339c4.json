{"ast":null,"code":"import _classCallCheck from \"/opt/lampp/htdocs/shawarma/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/opt/lampp/htdocs/shawarma/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/opt/lampp/htdocs/shawarma/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/opt/lampp/htdocs/shawarma/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/opt/lampp/htdocs/shawarma/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/opt/lampp/htdocs/shawarma/src/components/Mobile/Items/index.js\";\nimport React, { Component } from \"react\";\nimport { getRestaurantInfo, getRestaurantItems, resetInfo, resetItems } from \"../../../services/items/actions\";\nimport FloatCart from \"../FloatCart\";\nimport ItemList from \"./ItemList\";\nimport Meta from \"../../helpers/meta\";\nimport { Redirect } from \"react-router\";\nimport RestaurantInfo from \"./RestaurantInfo\";\nimport { connect } from \"react-redux\";\nimport Ink from \"react-ink\";\nimport Fade from \"react-reveal/Fade\";\nimport Flip from \"react-reveal/Flip\";\n\nvar Items =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Items, _Component);\n\n  function Items() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, Items);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(Items)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      is_active: 1,\n      loading: true,\n      menuListOpen: false,\n      menuClicked: false\n    };\n\n    _this.handleMenuOpen = function () {\n      _this.setState({\n        menuListOpen: true\n      });\n\n      document.getElementsByTagName(\"html\")[0].classList.add(\"noscroll\");\n      document.getElementsByTagName(\"body\")[0].classList.add(\"noscroll\");\n    };\n\n    _this.handleClickOutside = function (event) {\n      if (_this.refs.menuItemBlock && !_this.refs.menuItemBlock.contains(event.target)) {\n        document.getElementsByTagName(\"html\")[0].classList.remove(\"noscroll\");\n        document.getElementsByTagName(\"body\")[0].classList.remove(\"noscroll\");\n\n        _this.setState({\n          menuListOpen: false\n        });\n      }\n    };\n\n    _this.handleMenuItemClick = function (event) {\n      _this.setState({\n        menuClicked: true\n      }); // console.log(event.currentTarget.dataset.name);\n\n\n      var categoryBlock = document.getElementById(event.currentTarget.dataset.name);\n      setTimeout(function () {\n        categoryBlock.scrollIntoView();\n        window.scrollBy(0, -40);\n\n        _this.setState({\n          menuListOpen: false\n        });\n\n        document.getElementsByTagName(\"html\")[0].classList.remove(\"noscroll\");\n        document.getElementsByTagName(\"body\")[0].classList.remove(\"noscroll\");\n      }, _this.state.menuClicked ? 0 : 500);\n    };\n\n    return _this;\n  }\n\n  _createClass(Items, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      //if currentLocation doesnt exists in localstorage then redirect the user to firstscreen\n      //else make API calls\n      if (localStorage.getItem(\"userSetAddress\") === null) {\n        this.props.history.push(\"/search-location\");\n      } else {\n        this.props.getRestaurantInfo(this.props.match.params.restaurant).then(function (response) {\n          if (response) {\n            if (response.payload.id) {\n              //get items\n              _this2.props.getRestaurantItems(_this2.props.match.params.restaurant);\n            } else {\n              //404, redirect to homepage\n              _this2.context.router.history.push(\"/\");\n            }\n\n            if (response.payload.delivery_type === 1) {\n              localStorage.setItem(\"userSelected\", \"DELIVERY\");\n            }\n\n            if (response.payload.delivery_type === 2) {\n              localStorage.setItem(\"userSelected\", \"SELFPICKUP\");\n            }\n\n            if (response.payload.delivery_type === 3 && localStorage.getItem(\"userPreferredSelection\") === \"DELIVERY\") {\n              localStorage.setItem(\"userSelected\", \"DELIVERY\");\n            }\n\n            if (response.payload.delivery_type === 3 && localStorage.getItem(\"userPreferredSelection\") === \"SELFPICKUP\") {\n              localStorage.setItem(\"userSelected\", \"SELFPICKUP\");\n            }\n\n            if (response.payload.is_active === \"undefined\") {\n              _this2.setState({\n                loading: true\n              });\n            }\n\n            if (response.payload.is_active === 1 || response.payload.is_active === 0) {\n              _this2.setState({\n                loading: false\n              });\n\n              _this2.setState({\n                is_active: response.payload.is_active\n              });\n            }\n          }\n        });\n      }\n\n      if (localStorage.getItem(\"userSelected\") === null) {\n        localStorage.setItem(\"userSelected\", \"DELIVERY\");\n      }\n\n      document.addEventListener(\"mousedown\", this.handleClickOutside);\n    }\n  }, {\n    key: \"componentWillReceiveProps\",\n    value: function componentWillReceiveProps(nextProps) {\n      if (!this.state.is_active) {\n        document.getElementsByTagName(\"html\")[0].classList.add(\"page-inactive\");\n      }\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      this.props.resetItems();\n      this.props.resetInfo();\n      document.removeEventListener(\"mousedown\", this.handleClickOutside);\n      document.getElementsByTagName(\"html\")[0].classList.remove(\"page-inactive\");\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      if (window.innerWidth > 768) {\n        return React.createElement(Redirect, {\n          to: \"/\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 122\n          },\n          __self: this\n        });\n      }\n\n      if (localStorage.getItem(\"storeColor\") === null) {\n        return React.createElement(Redirect, {\n          to: \"/\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 125\n          },\n          __self: this\n        });\n      }\n\n      return React.createElement(React.Fragment, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 128\n        },\n        __self: this\n      }, React.createElement(Meta, {\n        seotitle: \"\".concat(this.props.restaurant_info.name, \" | \").concat(localStorage.getItem(\"seoMetaTitle\")),\n        seodescription: localStorage.getItem(\"seoMetaDescription\"),\n        ogtype: \"website\",\n        ogtitle: \"\".concat(this.props.restaurant_info.name, \" | \").concat(localStorage.getItem(\"seoOgTitle\")),\n        ogdescription: localStorage.getItem(\"seoOgDescription\"),\n        ogurl: window.location.href,\n        twittertitle: \"\".concat(this.props.restaurant_info.name, \" | \").concat(localStorage.getItem(\"seoTwitterTitle\")),\n        twitterdescription: localStorage.getItem(\"seoTwitterDescription\"),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 129\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        key: this.props.match.params.restaurant,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 139\n        },\n        __self: this\n      }, React.createElement(RestaurantInfo, {\n        history: this.props.history,\n        restaurant: this.props.restaurant_info,\n        withLinkToRestaurant: false,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 140\n        },\n        __self: this\n      }), React.createElement(ItemList, {\n        data: this.props.restaurant_items,\n        restaurant: this.props.restaurant_info,\n        menuClicked: this.state.menuClicked,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 145\n        },\n        __self: this\n      })), this.props.restaurant_info.certificate && React.createElement(\"div\", {\n        className: \"mb-100 text-center certificate-code\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 152\n        },\n        __self: this\n      }, localStorage.getItem(\"certificateCodeText\"), \" \", this.props.restaurant_info.certificate), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 156\n        },\n        __self: this\n      }, !this.state.loading && React.createElement(React.Fragment, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 158\n        },\n        __self: this\n      }, this.state.is_active ? React.createElement(FloatCart, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 160\n        },\n        __self: this\n      }) : React.createElement(\"div\", {\n        className: \"auth-error no-click\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 162\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"error-shake\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 163\n        },\n        __self: this\n      }, localStorage.getItem(\"notAcceptingOrdersMsg\"))))), React.createElement(\"div\", {\n        className: \"menu-list-container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 170\n        },\n        __self: this\n      }, this.state.menuListOpen ? React.createElement(React.Fragment, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 172\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"menu-open-backdrop\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 173\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"menu-items-block\",\n        ref: \"menuItemBlock\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 174\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"menu-item-block-inner\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 175\n        },\n        __self: this\n      }, this.props.restaurant_items.items && React.createElement(React.Fragment, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 177\n        },\n        __self: this\n      }, Object.keys(this.props.restaurant_items.items).map(function (category, index) {\n        return React.createElement(\"div\", {\n          className: \"menu-item-block-single\",\n          key: category,\n          onClick: _this3.handleMenuItemClick,\n          \"data-name\": category + index,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 179\n          },\n          __self: this\n        }, React.createElement(Fade, {\n          bottom: true,\n          duration: 150 * index,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 185\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: \"menu-item-block-single-name\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 186\n          },\n          __self: this\n        }, category), React.createElement(\"div\", {\n          className: \"menu-item-block-single-quantity\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 187\n          },\n          __self: this\n        }, Object.keys(_this3.props.restaurant_items.items[category]).length)));\n      }))))) : React.createElement(\"div\", {\n        className: \"menu-button-block-main\",\n        onClick: this.handleMenuOpen,\n        style: {\n          bottom: this.props.cartTotal.productQuantity > 0 ? \"5rem\" : \"2rem\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 202\n        },\n        __self: this\n      }, React.createElement(Flip, {\n        bottom: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 207\n        },\n        __self: this\n      }, React.createElement(\"button\", {\n        className: \"btn btn-menu-list\",\n        style: {\n          backgroundColor: localStorage.getItem(\"storeColor\")\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 208\n        },\n        __self: this\n      }, React.createElement(\"i\", {\n        className: \"si si-list mr-1\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 212\n        },\n        __self: this\n      }), \" \", localStorage.getItem(\"itemsMenuButtonText\"), React.createElement(Ink, {\n        duration: \"500\",\n        hasTouch: false,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 213\n        },\n        __self: this\n      }))))));\n    }\n  }]);\n\n  return Items;\n}(Component);\n\nItems.contextTypes = {\n  router: function router() {\n    return null;\n  }\n};\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    restaurant_info: state.items.restaurant_info,\n    restaurant_items: state.items.restaurant_items,\n    cartTotal: state.total.data\n  };\n};\n\nexport default connect(mapStateToProps, {\n  getRestaurantInfo: getRestaurantInfo,\n  getRestaurantItems: getRestaurantItems,\n  resetItems: resetItems,\n  resetInfo: resetInfo\n})(Items);","map":{"version":3,"sources":["/opt/lampp/htdocs/shawarma/src/components/Mobile/Items/index.js"],"names":["React","Component","getRestaurantInfo","getRestaurantItems","resetInfo","resetItems","FloatCart","ItemList","Meta","Redirect","RestaurantInfo","connect","Ink","Fade","Flip","Items","state","is_active","loading","menuListOpen","menuClicked","handleMenuOpen","setState","document","getElementsByTagName","classList","add","handleClickOutside","event","refs","menuItemBlock","contains","target","remove","handleMenuItemClick","categoryBlock","getElementById","currentTarget","dataset","name","setTimeout","scrollIntoView","window","scrollBy","localStorage","getItem","props","history","push","match","params","restaurant","then","response","payload","id","context","router","delivery_type","setItem","addEventListener","nextProps","removeEventListener","innerWidth","restaurant_info","location","href","restaurant_items","certificate","items","Object","keys","map","category","index","length","bottom","cartTotal","productQuantity","backgroundColor","contextTypes","mapStateToProps","total","data"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport { getRestaurantInfo, getRestaurantItems, resetInfo, resetItems } from \"../../../services/items/actions\";\r\n\r\nimport FloatCart from \"../FloatCart\";\r\nimport ItemList from \"./ItemList\";\r\nimport Meta from \"../../helpers/meta\";\r\nimport { Redirect } from \"react-router\";\r\nimport RestaurantInfo from \"./RestaurantInfo\";\r\nimport { connect } from \"react-redux\";\r\nimport Ink from \"react-ink\";\r\nimport Fade from \"react-reveal/Fade\";\r\nimport Flip from \"react-reveal/Flip\";\r\n\r\nclass Items extends Component {\r\n\tstatic contextTypes = {\r\n\t\trouter: () => null,\r\n\t};\r\n\tstate = {\r\n\t\tis_active: 1,\r\n\t\tloading: true,\r\n\t\tmenuListOpen: false,\r\n\t\tmenuClicked: false,\r\n\t};\r\n\tcomponentDidMount() {\r\n\t\t//if currentLocation doesnt exists in localstorage then redirect the user to firstscreen\r\n\t\t//else make API calls\r\n\t\tif (localStorage.getItem(\"userSetAddress\") === null) {\r\n\t\t\tthis.props.history.push(\"/search-location\");\r\n\t\t} else {\r\n\t\t\tthis.props.getRestaurantInfo(this.props.match.params.restaurant).then((response) => {\r\n\t\t\t\tif (response) {\r\n\t\t\t\t\tif (response.payload.id) {\r\n\t\t\t\t\t\t//get items\r\n\t\t\t\t\t\tthis.props.getRestaurantItems(this.props.match.params.restaurant);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t//404, redirect to homepage\r\n\t\t\t\t\t\tthis.context.router.history.push(\"/\");\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (response.payload.delivery_type === 1) {\r\n\t\t\t\t\t\tlocalStorage.setItem(\"userSelected\", \"DELIVERY\");\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (response.payload.delivery_type === 2) {\r\n\t\t\t\t\t\tlocalStorage.setItem(\"userSelected\", \"SELFPICKUP\");\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (\r\n\t\t\t\t\t\tresponse.payload.delivery_type === 3 &&\r\n\t\t\t\t\t\tlocalStorage.getItem(\"userPreferredSelection\") === \"DELIVERY\"\r\n\t\t\t\t\t) {\r\n\t\t\t\t\t\tlocalStorage.setItem(\"userSelected\", \"DELIVERY\");\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (\r\n\t\t\t\t\t\tresponse.payload.delivery_type === 3 &&\r\n\t\t\t\t\t\tlocalStorage.getItem(\"userPreferredSelection\") === \"SELFPICKUP\"\r\n\t\t\t\t\t) {\r\n\t\t\t\t\t\tlocalStorage.setItem(\"userSelected\", \"SELFPICKUP\");\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (response.payload.is_active === \"undefined\") {\r\n\t\t\t\t\t\tthis.setState({ loading: true });\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (response.payload.is_active === 1 || response.payload.is_active === 0) {\r\n\t\t\t\t\t\tthis.setState({ loading: false });\r\n\t\t\t\t\t\tthis.setState({ is_active: response.payload.is_active });\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tif (localStorage.getItem(\"userSelected\") === null) {\r\n\t\t\tlocalStorage.setItem(\"userSelected\", \"DELIVERY\");\r\n\t\t}\r\n\t\tdocument.addEventListener(\"mousedown\", this.handleClickOutside);\r\n\t}\r\n\r\n\tcomponentWillReceiveProps(nextProps) {\r\n\t\tif (!this.state.is_active) {\r\n\t\t\tdocument.getElementsByTagName(\"html\")[0].classList.add(\"page-inactive\");\r\n\t\t}\r\n\t}\r\n\r\n\thandleMenuOpen = () => {\r\n\t\tthis.setState({ menuListOpen: true });\r\n\t\tdocument.getElementsByTagName(\"html\")[0].classList.add(\"noscroll\");\r\n\t\tdocument.getElementsByTagName(\"body\")[0].classList.add(\"noscroll\");\r\n\t};\r\n\r\n\thandleClickOutside = (event) => {\r\n\t\tif (this.refs.menuItemBlock && !this.refs.menuItemBlock.contains(event.target)) {\r\n\t\t\tdocument.getElementsByTagName(\"html\")[0].classList.remove(\"noscroll\");\r\n\t\t\tdocument.getElementsByTagName(\"body\")[0].classList.remove(\"noscroll\");\r\n\t\t\tthis.setState({ menuListOpen: false });\r\n\t\t}\r\n\t};\r\n\r\n\t//when menu-item clicked, go to that division and change menuListOpen =false\r\n\thandleMenuItemClick = (event) => {\r\n\t\tthis.setState({ menuClicked: true });\r\n\t\t// console.log(event.currentTarget.dataset.name);\r\n\t\tconst categoryBlock = document.getElementById(event.currentTarget.dataset.name);\r\n\r\n\t\tsetTimeout(\r\n\t\t\t() => {\r\n\t\t\t\tcategoryBlock.scrollIntoView();\r\n\t\t\t\twindow.scrollBy(0, -40);\r\n\t\t\t\tthis.setState({ menuListOpen: false });\r\n\t\t\t\tdocument.getElementsByTagName(\"html\")[0].classList.remove(\"noscroll\");\r\n\t\t\t\tdocument.getElementsByTagName(\"body\")[0].classList.remove(\"noscroll\");\r\n\t\t\t},\r\n\t\t\tthis.state.menuClicked ? 0 : 500\r\n\t\t);\r\n\t};\r\n\r\n\tcomponentWillUnmount() {\r\n\t\tthis.props.resetItems();\r\n\t\tthis.props.resetInfo();\r\n\t\tdocument.removeEventListener(\"mousedown\", this.handleClickOutside);\r\n\t\tdocument.getElementsByTagName(\"html\")[0].classList.remove(\"page-inactive\");\r\n\t}\r\n\r\n\trender() {\r\n\t\tif (window.innerWidth > 768) {\r\n\t\t\treturn <Redirect to=\"/\" />;\r\n\t\t}\r\n\t\tif (localStorage.getItem(\"storeColor\") === null) {\r\n\t\t\treturn <Redirect to={\"/\"} />;\r\n\t\t}\r\n\t\treturn (\r\n\t\t\t<React.Fragment>\r\n\t\t\t\t<Meta\r\n\t\t\t\t\tseotitle={`${this.props.restaurant_info.name} | ${localStorage.getItem(\"seoMetaTitle\")}`}\r\n\t\t\t\t\tseodescription={localStorage.getItem(\"seoMetaDescription\")}\r\n\t\t\t\t\togtype=\"website\"\r\n\t\t\t\t\togtitle={`${this.props.restaurant_info.name} | ${localStorage.getItem(\"seoOgTitle\")}`}\r\n\t\t\t\t\togdescription={localStorage.getItem(\"seoOgDescription\")}\r\n\t\t\t\t\togurl={window.location.href}\r\n\t\t\t\t\ttwittertitle={`${this.props.restaurant_info.name} | ${localStorage.getItem(\"seoTwitterTitle\")}`}\r\n\t\t\t\t\ttwitterdescription={localStorage.getItem(\"seoTwitterDescription\")}\r\n\t\t\t\t/>\r\n\t\t\t\t<div key={this.props.match.params.restaurant}>\r\n\t\t\t\t\t<RestaurantInfo\r\n\t\t\t\t\t\thistory={this.props.history}\r\n\t\t\t\t\t\trestaurant={this.props.restaurant_info}\r\n\t\t\t\t\t\twithLinkToRestaurant={false}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<ItemList\r\n\t\t\t\t\t\tdata={this.props.restaurant_items}\r\n\t\t\t\t\t\trestaurant={this.props.restaurant_info}\r\n\t\t\t\t\t\tmenuClicked={this.state.menuClicked}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</div>\r\n\t\t\t\t{this.props.restaurant_info.certificate && (\r\n\t\t\t\t\t<div className=\"mb-100 text-center certificate-code\">\r\n\t\t\t\t\t\t{localStorage.getItem(\"certificateCodeText\")} {this.props.restaurant_info.certificate}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t)}\r\n\t\t\t\t<div>\r\n\t\t\t\t\t{!this.state.loading && (\r\n\t\t\t\t\t\t<React.Fragment>\r\n\t\t\t\t\t\t\t{this.state.is_active ? (\r\n\t\t\t\t\t\t\t\t<FloatCart />\r\n\t\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t\t<div className=\"auth-error no-click\">\r\n\t\t\t\t\t\t\t\t\t<div className=\"error-shake\">{localStorage.getItem(\"notAcceptingOrdersMsg\")}</div>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t</React.Fragment>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t<div className=\"menu-list-container\">\r\n\t\t\t\t\t{this.state.menuListOpen ? (\r\n\t\t\t\t\t\t<React.Fragment>\r\n\t\t\t\t\t\t\t<div className=\"menu-open-backdrop\" />\r\n\t\t\t\t\t\t\t<div className=\"menu-items-block\" ref=\"menuItemBlock\">\r\n\t\t\t\t\t\t\t\t<div className=\"menu-item-block-inner\">\r\n\t\t\t\t\t\t\t\t\t{this.props.restaurant_items.items && (\r\n\t\t\t\t\t\t\t\t\t\t<React.Fragment>\r\n\t\t\t\t\t\t\t\t\t\t\t{Object.keys(this.props.restaurant_items.items).map((category, index) => (\r\n\t\t\t\t\t\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"menu-item-block-single\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tkey={category}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={this.handleMenuItemClick}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tdata-name={category + index}\r\n\t\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Fade bottom duration={150 * index}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"menu-item-block-single-name\">{category}</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"menu-item-block-single-quantity\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tObject.keys(this.props.restaurant_items.items[category])\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.length\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</Fade>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t\t\t\t\t</React.Fragment>\r\n\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</React.Fragment>\r\n\t\t\t\t\t) : (\r\n\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\tclassName=\"menu-button-block-main\"\r\n\t\t\t\t\t\t\tonClick={this.handleMenuOpen}\r\n\t\t\t\t\t\t\tstyle={{ bottom: this.props.cartTotal.productQuantity > 0 ? \"5rem\" : \"2rem\" }}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<Flip bottom>\r\n\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\tclassName=\"btn btn-menu-list\"\r\n\t\t\t\t\t\t\t\t\tstyle={{ backgroundColor: localStorage.getItem(\"storeColor\") }}\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t<i className=\"si si-list mr-1\" /> {localStorage.getItem(\"itemsMenuButtonText\")}\r\n\t\t\t\t\t\t\t\t\t<Ink duration=\"500\" hasTouch={false} />\r\n\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t</Flip>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</div>\r\n\t\t\t</React.Fragment>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nconst mapStateToProps = (state) => ({\r\n\trestaurant_info: state.items.restaurant_info,\r\n\trestaurant_items: state.items.restaurant_items,\r\n\tcartTotal: state.total.data,\r\n});\r\n\r\nexport default connect(\r\n\tmapStateToProps,\r\n\t{\r\n\t\tgetRestaurantInfo,\r\n\t\tgetRestaurantItems,\r\n\t\tresetItems,\r\n\t\tresetInfo,\r\n\t}\r\n)(Items);\r\n"]},"metadata":{},"sourceType":"module"}