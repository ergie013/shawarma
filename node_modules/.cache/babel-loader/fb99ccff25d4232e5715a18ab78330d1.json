{"ast":null,"code":"import { UPDATE_CART } from \"./actionTypes\";\nimport { formatPrice } from \"../../components/helpers/formatPrice\";\nexport var updateCart = function updateCart(cartProducts) {\n  return function (dispatch) {\n    var productQuantity = cartProducts.reduce(function (sum, p) {\n      // sum += p.quantity;\n      sum++;\n      return sum;\n    }, 0);\n    var totalPrice = cartProducts.reduce(function (sum, p) {\n      var addonTotal = 0;\n\n      if (p.selectedaddons) {\n        p.selectedaddons.map(function (addonArray) {\n          addonTotal += parseFloat(addonArray.price);\n          return addonTotal;\n        });\n      }\n\n      sum += p.price * p.quantity + addonTotal * p.quantity;\n      sum = parseFloat(sum);\n      formatPrice(sum);\n      return sum;\n    }, 0);\n    var cartTotal = {\n      productQuantity: productQuantity,\n      totalPrice: totalPrice\n    };\n    dispatch({\n      type: UPDATE_CART,\n      payload: cartTotal\n    });\n  };\n};","map":{"version":3,"sources":["/opt/lampp/htdocs/shawarma/src/services/total/actions.js"],"names":["UPDATE_CART","formatPrice","updateCart","cartProducts","dispatch","productQuantity","reduce","sum","p","totalPrice","addonTotal","selectedaddons","map","addonArray","parseFloat","price","quantity","cartTotal","type","payload"],"mappings":"AAAA,SAASA,WAAT,QAA4B,eAA5B;AACA,SAASC,WAAT,QAA4B,sCAA5B;AAEA,OAAO,IAAMC,UAAU,GAAG,SAAbA,UAAa,CAAAC,YAAY;AAAA,SAAI,UAAAC,QAAQ,EAAI;AACrD,QAAIC,eAAe,GAAGF,YAAY,CAACG,MAAb,CAAoB,UAACC,GAAD,EAAMC,CAAN,EAAY;AACrD;AACAD,MAAAA,GAAG;AACH,aAAOA,GAAP;AACA,KAJqB,EAInB,CAJmB,CAAtB;AAMA,QAAIE,UAAU,GAAGN,YAAY,CAACG,MAAb,CAAoB,UAACC,GAAD,EAAMC,CAAN,EAAY;AAChD,UAAIE,UAAU,GAAG,CAAjB;;AACA,UAAIF,CAAC,CAACG,cAAN,EAAsB;AACrBH,QAAAA,CAAC,CAACG,cAAF,CAAiBC,GAAjB,CAAqB,UAAAC,UAAU,EAAI;AAClCH,UAAAA,UAAU,IAAII,UAAU,CAACD,UAAU,CAACE,KAAZ,CAAxB;AACA,iBAAOL,UAAP;AACA,SAHD;AAIA;;AACDH,MAAAA,GAAG,IAAIC,CAAC,CAACO,KAAF,GAAUP,CAAC,CAACQ,QAAZ,GAAuBN,UAAU,GAAGF,CAAC,CAACQ,QAA7C;AACAT,MAAAA,GAAG,GAAGO,UAAU,CAACP,GAAD,CAAhB;AACAN,MAAAA,WAAW,CAACM,GAAD,CAAX;AACA,aAAOA,GAAP;AACA,KAZgB,EAYd,CAZc,CAAjB;AAcA,QAAIU,SAAS,GAAG;AACfZ,MAAAA,eAAe,EAAfA,eADe;AAEfI,MAAAA,UAAU,EAAVA;AAFe,KAAhB;AAKAL,IAAAA,QAAQ,CAAC;AACRc,MAAAA,IAAI,EAAElB,WADE;AAERmB,MAAAA,OAAO,EAAEF;AAFD,KAAD,CAAR;AAIA,GA9BqC;AAAA,CAA/B","sourcesContent":["import { UPDATE_CART } from \"./actionTypes\";\r\nimport { formatPrice } from \"../../components/helpers/formatPrice\";\r\n\r\nexport const updateCart = cartProducts => dispatch => {\r\n\tlet productQuantity = cartProducts.reduce((sum, p) => {\r\n\t\t// sum += p.quantity;\r\n\t\tsum++;\r\n\t\treturn sum;\r\n\t}, 0);\r\n\r\n\tlet totalPrice = cartProducts.reduce((sum, p) => {\r\n\t\tlet addonTotal = 0;\r\n\t\tif (p.selectedaddons) {\r\n\t\t\tp.selectedaddons.map(addonArray => {\r\n\t\t\t\taddonTotal += parseFloat(addonArray.price);\r\n\t\t\t\treturn addonTotal;\r\n\t\t\t});\r\n\t\t}\r\n\t\tsum += p.price * p.quantity + addonTotal * p.quantity;\r\n\t\tsum = parseFloat(sum);\r\n\t\tformatPrice(sum);\r\n\t\treturn sum;\r\n\t}, 0);\r\n\r\n\tlet cartTotal = {\r\n\t\tproductQuantity,\r\n\t\ttotalPrice\r\n\t};\r\n\r\n\tdispatch({\r\n\t\ttype: UPDATE_CART,\r\n\t\tpayload: cartTotal\r\n\t});\r\n};\r\n"]},"metadata":{},"sourceType":"module"}