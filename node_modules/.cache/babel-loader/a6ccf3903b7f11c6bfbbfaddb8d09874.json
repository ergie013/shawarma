{"ast":null,"code":"import _defineProperty from \"/opt/lampp/htdocs/shawarma/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport { GET_RESTAURANT_INFO, GET_RESTAURANT_INFO_BY_ID, GET_RESTAURANT_ITEMS, RESET_INFO, RESET_ITEMS, SINGLE_ITEM, SEARCH_ITEM, CLEAR_SEARCH } from \"./actionTypes\";\nimport { GET_RESTAURANT_INFO_BY_ID_URL, GET_RESTAURANT_INFO_URL, GET_RESTAURANT_ITEMS_URL, GET_SINGLE_ITEM_URL, GET_RESTAURANT_INFO_AND_OPERATIONAL_STATUS_URL } from \"../../configs\";\nimport Axios from \"axios\";\nimport FuzzySearch from \"fuzzy-search\";\nexport var getRestaurantInfoAndOperationalStatus = function getRestaurantInfoAndOperationalStatus(id, latitude, longitude) {\n  return function (dispatch) {\n    return Axios.post(GET_RESTAURANT_INFO_AND_OPERATIONAL_STATUS_URL, {\n      id: id,\n      latitude: latitude,\n      longitude: longitude\n    }).then(function (response) {\n      var restaurant_info = response.data;\n      return dispatch({\n        type: GET_RESTAURANT_INFO,\n        payload: restaurant_info\n      });\n    }).catch(function (error) {\n      console.log(error);\n    });\n  };\n};\nexport var getRestaurantInfo = function getRestaurantInfo(slug) {\n  return function (dispatch) {\n    return Axios.post(GET_RESTAURANT_INFO_URL + \"/\" + slug).then(function (response) {\n      var restaurant_info = response.data;\n      return dispatch({\n        type: GET_RESTAURANT_INFO,\n        payload: restaurant_info\n      });\n    }).catch(function (error) {\n      console.log(error);\n    });\n  };\n};\nexport var getRestaurantInfoById = function getRestaurantInfoById(id) {\n  return function (dispatch) {\n    return Axios.post(GET_RESTAURANT_INFO_BY_ID_URL + \"/\" + id).then(function (response) {\n      var restaurant_info = response.data;\n      return dispatch({\n        type: GET_RESTAURANT_INFO_BY_ID,\n        payload: restaurant_info\n      });\n    }).catch(function (error) {\n      console.log(error);\n    });\n  };\n};\nexport var getRestaurantItems = function getRestaurantItems(slug) {\n  return function (dispatch) {\n    Axios.post(GET_RESTAURANT_ITEMS_URL + \"/\" + slug).then(function (response) {\n      var restaurant_items = response.data;\n      return dispatch({\n        type: GET_RESTAURANT_ITEMS,\n        payload: restaurant_items\n      });\n    }).catch(function (error) {\n      console.log(error);\n    });\n  };\n};\nexport var getSingleItem = function getSingleItem(id) {\n  return function (dispatch) {\n    return Axios.post(GET_SINGLE_ITEM_URL, {\n      id: id\n    }).then(function (response) {\n      var item = response.data;\n      return dispatch({\n        type: SINGLE_ITEM,\n        payload: item\n      });\n    }).catch(function (error) {\n      console.log(error);\n    });\n  };\n};\nexport var resetItems = function resetItems() {\n  return function (dispatch) {\n    var empty = [];\n    return dispatch({\n      type: RESET_ITEMS,\n      payload: empty\n    });\n  };\n};\nexport var resetInfo = function resetInfo() {\n  return function (dispatch) {\n    var empty = [];\n    return dispatch({\n      type: RESET_INFO,\n      payload: empty\n    });\n  };\n};\nexport var searchItem = function searchItem(itemList, itemName, searchFoundText, noResultText) {\n  return function (dispatch, getState) {\n    var searchResultText = searchFoundText + itemName;\n    var noSearchFoundText = noResultText + itemName; // console.log(JSON.stringify(getState().items.restaurant_items.items));\n    // const state = getState().items.restaurant_items.items;\n\n    var arr = [];\n    var foodItems = [];\n\n    if (itemList && [itemList].length >= 0) {\n      Object.keys(itemList).forEach(function (keys) {\n        itemList[keys].forEach(function (itemsList) {\n          arr.push(itemsList); // foodItems = arr.filter((product) => {\n          // \treturn product.name.toLowerCase().indexOf(itemName.toLowerCase()) !== -1;\n          // });\n\n          var searcher = new FuzzySearch(arr, [\"name\"], {\n            caseSensitive: false\n          });\n          foodItems = searcher.search(itemName);\n        });\n      });\n    }\n\n    if (foodItems.length > 0) {\n      return dispatch({\n        type: SEARCH_ITEM,\n        payload: {\n          items: _defineProperty({}, searchResultText, foodItems)\n        }\n      });\n    } else if (foodItems.length <= 0) {\n      return dispatch({\n        type: SEARCH_ITEM,\n        payload: {\n          items: _defineProperty({}, noSearchFoundText, foodItems)\n        }\n      });\n    }\n  };\n};\nexport var clearSearch = function clearSearch(data) {\n  return function (dispatch) {\n    return dispatch({\n      type: CLEAR_SEARCH,\n      payload: data\n    });\n  };\n};","map":{"version":3,"sources":["/opt/lampp/htdocs/shawarma/src/services/items/actions.js"],"names":["GET_RESTAURANT_INFO","GET_RESTAURANT_INFO_BY_ID","GET_RESTAURANT_ITEMS","RESET_INFO","RESET_ITEMS","SINGLE_ITEM","SEARCH_ITEM","CLEAR_SEARCH","GET_RESTAURANT_INFO_BY_ID_URL","GET_RESTAURANT_INFO_URL","GET_RESTAURANT_ITEMS_URL","GET_SINGLE_ITEM_URL","GET_RESTAURANT_INFO_AND_OPERATIONAL_STATUS_URL","Axios","FuzzySearch","getRestaurantInfoAndOperationalStatus","id","latitude","longitude","dispatch","post","then","response","restaurant_info","data","type","payload","catch","error","console","log","getRestaurantInfo","slug","getRestaurantInfoById","getRestaurantItems","restaurant_items","getSingleItem","item","resetItems","empty","resetInfo","searchItem","itemList","itemName","searchFoundText","noResultText","getState","searchResultText","noSearchFoundText","arr","foodItems","length","Object","keys","forEach","itemsList","push","searcher","caseSensitive","search","items","clearSearch"],"mappings":"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","sourcesContent":["import {\r\n\tGET_RESTAURANT_INFO,\r\n\tGET_RESTAURANT_INFO_BY_ID,\r\n\tGET_RESTAURANT_ITEMS,\r\n\tRESET_INFO,\r\n\tRESET_ITEMS,\r\n\tSINGLE_ITEM,\r\n\tSEARCH_ITEM,\r\n\tCLEAR_SEARCH,\r\n} from \"./actionTypes\";\r\nimport {\r\n\tGET_RESTAURANT_INFO_BY_ID_URL,\r\n\tGET_RESTAURANT_INFO_URL,\r\n\tGET_RESTAURANT_ITEMS_URL,\r\n\tGET_SINGLE_ITEM_URL,\r\n\tGET_RESTAURANT_INFO_AND_OPERATIONAL_STATUS_URL,\r\n} from \"../../configs\";\r\n\r\nimport Axios from \"axios\";\r\nimport FuzzySearch from \"fuzzy-search\";\r\n\r\nexport const getRestaurantInfoAndOperationalStatus = (id, latitude, longitude) => (dispatch) => {\r\n\treturn Axios.post(GET_RESTAURANT_INFO_AND_OPERATIONAL_STATUS_URL, {\r\n\t\tid: id,\r\n\t\tlatitude: latitude,\r\n\t\tlongitude: longitude,\r\n\t})\r\n\t\t.then((response) => {\r\n\t\t\tconst restaurant_info = response.data;\r\n\t\t\treturn dispatch({ type: GET_RESTAURANT_INFO, payload: restaurant_info });\r\n\t\t})\r\n\t\t.catch(function(error) {\r\n\t\t\tconsole.log(error);\r\n\t\t});\r\n};\r\n\r\nexport const getRestaurantInfo = (slug) => (dispatch) => {\r\n\treturn Axios.post(GET_RESTAURANT_INFO_URL + \"/\" + slug)\r\n\t\t.then((response) => {\r\n\t\t\tconst restaurant_info = response.data;\r\n\t\t\treturn dispatch({ type: GET_RESTAURANT_INFO, payload: restaurant_info });\r\n\t\t})\r\n\t\t.catch(function(error) {\r\n\t\t\tconsole.log(error);\r\n\t\t});\r\n};\r\n\r\nexport const getRestaurantInfoById = (id) => (dispatch) => {\r\n\treturn Axios.post(GET_RESTAURANT_INFO_BY_ID_URL + \"/\" + id)\r\n\t\t.then((response) => {\r\n\t\t\tconst restaurant_info = response.data;\r\n\t\t\treturn dispatch({\r\n\t\t\t\ttype: GET_RESTAURANT_INFO_BY_ID,\r\n\t\t\t\tpayload: restaurant_info,\r\n\t\t\t});\r\n\t\t})\r\n\t\t.catch(function(error) {\r\n\t\t\tconsole.log(error);\r\n\t\t});\r\n};\r\n\r\nexport const getRestaurantItems = (slug) => (dispatch) => {\r\n\tAxios.post(GET_RESTAURANT_ITEMS_URL + \"/\" + slug)\r\n\t\t.then((response) => {\r\n\t\t\tconst restaurant_items = response.data;\r\n\t\t\treturn dispatch({ type: GET_RESTAURANT_ITEMS, payload: restaurant_items });\r\n\t\t})\r\n\t\t.catch(function(error) {\r\n\t\t\tconsole.log(error);\r\n\t\t});\r\n};\r\n\r\nexport const getSingleItem = (id) => (dispatch) => {\r\n\treturn Axios.post(GET_SINGLE_ITEM_URL, {\r\n\t\tid: id,\r\n\t})\r\n\t\t.then((response) => {\r\n\t\t\tconst item = response.data;\r\n\t\t\treturn dispatch({ type: SINGLE_ITEM, payload: item });\r\n\t\t})\r\n\t\t.catch(function(error) {\r\n\t\t\tconsole.log(error);\r\n\t\t});\r\n};\r\n\r\nexport const resetItems = () => (dispatch) => {\r\n\tconst empty = [];\r\n\treturn dispatch({ type: RESET_ITEMS, payload: empty });\r\n};\r\n\r\nexport const resetInfo = () => (dispatch) => {\r\n\tconst empty = [];\r\n\treturn dispatch({ type: RESET_INFO, payload: empty });\r\n};\r\n\r\nexport const searchItem = (itemList, itemName, searchFoundText, noResultText) => (dispatch, getState) => {\r\n\tconst searchResultText = searchFoundText + itemName;\r\n\tconst noSearchFoundText = noResultText + itemName;\r\n\t// console.log(JSON.stringify(getState().items.restaurant_items.items));\r\n\r\n\t// const state = getState().items.restaurant_items.items;\r\n\tlet arr = [];\r\n\tlet foodItems = [];\r\n\tif (itemList && [itemList].length >= 0) {\r\n\t\tObject.keys(itemList).forEach((keys) => {\r\n\t\t\titemList[keys].forEach((itemsList) => {\r\n\t\t\t\tarr.push(itemsList);\r\n\t\t\t\t// foodItems = arr.filter((product) => {\r\n\t\t\t\t// \treturn product.name.toLowerCase().indexOf(itemName.toLowerCase()) !== -1;\r\n\t\t\t\t// });\r\n\t\t\t\tconst searcher = new FuzzySearch(arr, [\"name\"], {\r\n\t\t\t\t\tcaseSensitive: false,\r\n\t\t\t\t});\r\n\t\t\t\tfoodItems = searcher.search(itemName);\r\n\t\t\t});\r\n\t\t});\r\n\t}\r\n\tif (foodItems.length > 0) {\r\n\t\treturn dispatch({\r\n\t\t\ttype: SEARCH_ITEM,\r\n\t\t\tpayload: { items: { [searchResultText]: foodItems } },\r\n\t\t});\r\n\t} else if (foodItems.length <= 0) {\r\n\t\treturn dispatch({\r\n\t\t\ttype: SEARCH_ITEM,\r\n\t\t\tpayload: { items: { [noSearchFoundText]: foodItems } },\r\n\t\t});\r\n\t}\r\n};\r\n\r\nexport const clearSearch = (data) => (dispatch) => {\r\n\treturn dispatch({ type: CLEAR_SEARCH, payload: data });\r\n};\r\n"]},"metadata":{},"sourceType":"module"}