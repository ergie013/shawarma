{"ast":null,"code":"import _classCallCheck from \"/opt/lampp/htdocs/shawarma/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/opt/lampp/htdocs/shawarma/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/opt/lampp/htdocs/shawarma/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/opt/lampp/htdocs/shawarma/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/opt/lampp/htdocs/shawarma/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"/opt/lampp/htdocs/shawarma/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"/opt/lampp/htdocs/shawarma/src/components/Mobile/Cart/index.js\";\nimport React, { Component } from \"react\";\nimport { checkUserRunningOrder, updateUserInfo, checkBan } from \"../../../services/user/actions\";\nimport BackWithSearch from \"../../Mobile/Elements/BackWithSearch\";\nimport BillDetails from \"./BillDetails\";\nimport CartCheckoutBlock from \"./CartCheckoutBlock\";\nimport CartItems from \"./CartItems\";\nimport Coupon from \"./Coupon\";\nimport DelayLink from \"../../helpers/delayLink\";\nimport Footer from \"../Footer\";\nimport Ink from \"react-ink\";\nimport Meta from \"../../helpers/meta\";\nimport OrderComment from \"./OrderComment\";\nimport { Redirect } from \"react-router\";\nimport RestaurantInfoCart from \"./RestaurantInfoCart\";\nimport { calculateDistance } from \"../../helpers/calculateDistance\";\nimport calculateDistanceGoogle from \"../../helpers/calculateDistanceGoogle.js\";\nimport { connect } from \"react-redux\";\nimport { getRestaurantInfoById, getRestaurantInfoAndOperationalStatus } from \"../../../services/items/actions\";\nimport { updateCart } from \"../../../services/total/actions\";\nimport { formatPrice } from \"../../helpers/formatPrice\";\nimport { addProduct } from \"../../../services/cart/actions\";\nimport { checkCartItemsAvailability } from \"../../../services/confirmCart/actions\";\nimport { GoogleApiWrapper } from \"google-maps-react\";\nimport Loading from \"../../helpers/loading\";\nimport UserBan from \"../UserBan\";\nimport { removeCoupon } from \"../../../services/coupon/actions\";\n\nvar Cart =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Cart, _Component);\n\n  function Cart() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, Cart);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(Cart)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      loading: true,\n      alreadyRunningOrders: false,\n      is_operational_loading: true,\n      is_operational: true,\n      distance: 0,\n      is_active: false,\n      min_order_satisfied: false,\n      process_cart_loading: false,\n      is_all_items_available: false,\n      process_distance_calc_loading: false,\n      userBan: false\n    };\n\n    _this.fetchCheckBanAgain = function (token) {\n      _this.props.checkBan(token).then(function (response) {\n        if (response) {\n          if (!response.success) {\n            _this.setState({\n              userBan: true,\n              loading: false\n            });\n          } else {\n            _this.cartOperationalSteps();\n          }\n        }\n      });\n    };\n\n    _this.cartOperationalSteps = function () {\n      var user = _this.props.user;\n\n      _this.setState({\n        loading: false\n      });\n\n      if (_this.props.cartProducts.length) {\n        document.getElementsByTagName(\"body\")[0].classList.add(\"bg-grey\");\n\n        _this.checkForItemsAvailability();\n      }\n\n      if (localStorage.getItem(\"activeRestaurant\") !== null) {\n        _this.props.getRestaurantInfoById(localStorage.getItem(\"activeRestaurant\")).then(function (response) {\n          if (response) {\n            if (response.payload.id) {\n              if (!user.success) {\n                _this.__doesRestaurantOperatesAtThisLocation(response.payload);\n              }\n            }\n          }\n        });\n      }\n\n      if (user.success) {\n        _this.props.checkUserRunningOrder(user.data.id, user.data.auth_token);\n\n        _this.props.updateUserInfo(user.data.id, user.data.auth_token).then(function (updatedUser) {\n          // console.log(\"THIS SHOULD BE CALLED: UPDATED USER\", updatedUser);\n          if (typeof updatedUser !== \"undefined\") {\n            var userSetAddress = {\n              lat: updatedUser.payload.data.default_address.latitude,\n              lng: updatedUser.payload.data.default_address.longitude,\n              address: updatedUser.payload.data.default_address.address,\n              house: updatedUser.payload.data.default_address.house,\n              tag: updatedUser.payload.data.default_address.tag\n            };\n            var saveUserSetAddress = new Promise(function (resolve) {\n              localStorage.setItem(\"userSetAddress\", JSON.stringify(userSetAddress));\n              resolve(\"Address Saved\");\n            });\n            saveUserSetAddress.then(function () {\n              _this.__doesRestaurantOperatesAtThisLocation(_this.props.restaurant_info);\n            }); // localStorage.setItem(\"userSetAddress\", JSON.stringify(userSetAddress));\n          } else {\n            console.warn(\"Failed to fetch update user info... Solution: Reload Page\");\n          }\n        });\n      } else {\n        _this.setState({\n          alreadyRunningOrders: false\n        });\n      }\n    };\n\n    _this.addProductQuantity = function (product) {\n      var _this$props = _this.props,\n          cartProducts = _this$props.cartProducts,\n          updateCart = _this$props.updateCart;\n      var productAlreadyInCart = false;\n      cartProducts.forEach(function (cp) {\n        if (cp.id === product.id) {\n          if (JSON.stringify(cp.selectedaddons) === JSON.stringify(product.selectedaddons)) {\n            cp.quantity += 1;\n            productAlreadyInCart = true;\n          }\n        }\n      });\n\n      if (!productAlreadyInCart) {\n        cartProducts.push(product);\n      }\n\n      updateCart(cartProducts);\n    };\n\n    _this.removeProductQuantity = function (product) {\n      var _this$props2 = _this.props,\n          cartProducts = _this$props2.cartProducts,\n          updateCart = _this$props2.updateCart;\n      var index = cartProducts.findIndex(function (p) {\n        return p.id === product.id && JSON.stringify(p) === JSON.stringify(product);\n      }); //if product is in the cart then index will be greater than 0\n\n      if (index >= 0) {\n        cartProducts.forEach(function (cp) {\n          if (cp.id === product.id) {\n            if (JSON.stringify(cp) === JSON.stringify(product)) {\n              if (cp.quantity === 1) {\n                //if quantity is 1 then remove product from cart\n                cartProducts.splice(index, 1);\n              } else {\n                //else decrement the quantity by 1\n                cp.quantity -= 1;\n              }\n            }\n          }\n        });\n        updateCart(cartProducts);\n\n        _this.props.removeCoupon();\n      }\n    };\n\n    _this.removeProduct = function (product) {\n      // console.log(product);\n      // console.log(product.id);\n      var _this$props3 = _this.props,\n          cartProducts = _this$props3.cartProducts,\n          updateCart = _this$props3.updateCart;\n      var index = cartProducts.findIndex(function (cp) {\n        return cp.id === product.id;\n      }); // console.log(index);\n\n      cartProducts.splice(index, 1); // console.log(cartProducts);\n\n      updateCart(cartProducts);\n\n      _this.props.removeCoupon();\n\n      _this.checkForItemsAvailability();\n    };\n\n    _this.__doesRestaurantOperatesAtThisLocation = function (restaurant_info) {\n      //send user lat long to helper, check with the current restaurant lat long and setstate accordingly\n      var user = _this.props.user;\n\n      if (user.success) {\n        var distance = 0;\n\n        var self = _assertThisInitialized(_assertThisInitialized(_this));\n\n        if (localStorage.getItem(\"enGDMA\") === \"true\") {\n          _this.setState({\n            process_distance_calc_loading: true\n          });\n\n          distance = calculateDistanceGoogle(restaurant_info.longitude, restaurant_info.latitude, user.data.default_address.longitude, user.data.default_address.latitude, _this.props.google, function (distance) {\n            console.log(\"Distance:\", distance);\n            self.setState({\n              distance: distance,\n              process_distance_calc_loading: false\n            }, // self.__processRestaurantOperationalState(distance, restaurant_info)\n            self.__processRestaurantOperationalState(restaurant_info.id, user.data.default_address.latitude, user.data.default_address.longitude));\n          });\n        } else {\n          var _distance = calculateDistance(restaurant_info.longitude, restaurant_info.latitude, user.data.default_address.longitude, user.data.default_address.latitude);\n\n          _this.setState({\n            distance: _distance\n          }, _this.__processRestaurantOperationalState(restaurant_info.id, user.data.default_address.latitude, user.data.default_address.longitude));\n        }\n      } else {\n        //if Google Distance Matrix API is enabled\n        var _self = _assertThisInitialized(_assertThisInitialized(_this));\n\n        if (localStorage.getItem(\"enGDMA\") === \"true\") {\n          distance = calculateDistanceGoogle(restaurant_info.longitude, restaurant_info.latitude, JSON.parse(localStorage.getItem(\"userSetAddress\")).lng, JSON.parse(localStorage.getItem(\"userSetAddress\")).lat, _this.props.google, function (distance) {\n            console.log(distance);\n\n            _self.setState({\n              distance: distance\n            }, _self.__processRestaurantOperationalState(restaurant_info.id, JSON.parse(localStorage.getItem(\"userSetAddress\")).lat, JSON.parse(localStorage.getItem(\"userSetAddress\")).lng));\n          });\n        } else {\n          distance = calculateDistance(restaurant_info.longitude, restaurant_info.latitude, JSON.parse(localStorage.getItem(\"userSetAddress\")).lng, JSON.parse(localStorage.getItem(\"userSetAddress\")).lat);\n\n          _this.setState({\n            distance: distance\n          }, _this.__processRestaurantOperationalState(restaurant_info.id, JSON.parse(localStorage.getItem(\"userSetAddress\")).lat, JSON.parse(localStorage.getItem(\"userSetAddress\")).lng));\n        }\n\n        console.log(\"Distance -> \", _this.state.distance); // console.log(distance);\n      }\n    };\n\n    _this.__processRestaurantOperationalState = function (id, lat, lng) {\n      _this.props.getRestaurantInfoAndOperationalStatus(id, lat, lng).then(function (response) {\n        if (response) {\n          if (response.payload.is_operational) {\n            _this.setState({\n              is_operational: true,\n              is_operational_loading: false\n            });\n          } else {\n            _this.setState({\n              is_operational: false,\n              is_operational_loading: false\n            });\n          }\n        } else {\n          window.location.reload();\n        }\n      });\n    };\n\n    _this.__isRestaurantActive = function (restaurant_info) {\n      if (restaurant_info.is_active) {\n        _this.setState({\n          is_active: true\n        });\n      }\n    };\n\n    _this.__checkMinOrderSatisfied = function (restaurant_info, cartTotal) {\n      if (restaurant_info.min_order_price > 0) {\n        //if not null, then check the min order price with the order total\n        var totalPrice = parseFloat(formatPrice(cartTotal.totalPrice));\n        var minOrderPrice = parseFloat(formatPrice(restaurant_info.min_order_price));\n\n        if (totalPrice >= minOrderPrice) {\n          // console.log(\"Order Can Be Placed\", totalPrice + \" -- \" + minOrderPrice);\n          _this.setState({\n            min_order_satisfied: true\n          });\n        } else {\n          // console.log(\"Order CANNOT Be Placed\", totalPrice + \" -- \" + minOrderPrice);\n          _this.setState({\n            min_order_satisfied: false\n          });\n        }\n      } else {\n        // if null, then set to satisfied to true...\n        // console.log(\"Min order price is not set\");\n        _this.setState({\n          min_order_satisfied: true\n        });\n      }\n    };\n\n    _this.checkForItemsAvailability = function () {\n      var _this$props4 = _this.props,\n          checkCartItemsAvailability = _this$props4.checkCartItemsAvailability,\n          cartProducts = _this$props4.cartProducts,\n          addProduct = _this$props4.addProduct,\n          updateCart = _this$props4.updateCart;\n\n      _this.handleProcessCartLoading(true);\n\n      checkCartItemsAvailability(cartProducts).then(function (response) {\n        _this.handleProcessCartLoading(false);\n\n        _this.setState({\n          process_cart_loading: false\n        });\n\n        if (response && response.length) {\n          //get inactive items and mark as is_active 0\n          cartProducts.filter(function (_ref) {\n            var id = _ref.id;\n            return response.includes(id);\n          }).map(function (item) {\n            item.is_active = 0;\n            addProduct(item);\n            return item;\n          });\n\n          _this.handleItemsAvailability(false);\n        } else {\n          //if response length is 0 that means all items in cart are available, make all active\n          cartProducts.map(function (item) {\n            item.is_active = 1;\n            addProduct(item);\n            return item;\n          });\n\n          _this.handleItemsAvailability(true);\n        }\n\n        updateCart(_this.props.cartProducts);\n      });\n    };\n\n    _this.handleProcessCartLoading = function (value) {\n      _this.setState({\n        process_cart_loading: value\n      });\n    };\n\n    _this.handleItemsAvailability = function (value) {\n      _this.setState({\n        is_all_items_available: value\n      });\n    };\n\n    return _this;\n  }\n\n  _createClass(Cart, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      var user = this.props.user;\n\n      if (user.success) {\n        this.props.checkBan(user.data.auth_token).then(function (response) {\n          if (response) {\n            if (!response.success) {\n              _this2.setState({\n                userBan: true,\n                loading: false\n              });\n            } else {\n              _this2.cartOperationalSteps();\n            }\n          } else {\n            setTimeout(function () {\n              _this2.fetchCheckBanAgain(user.data.auth_token);\n            }, 2500);\n          }\n        });\n      } else {\n        this.cartOperationalSteps();\n      }\n    }\n  }, {\n    key: \"componentWillReceiveProps\",\n    value: function componentWillReceiveProps(nextProps) {\n      if (nextProps.restaurant_info.id) {\n        this.__isRestaurantActive(nextProps.restaurant_info);\n\n        this.__checkMinOrderSatisfied(nextProps.restaurant_info, nextProps.cartTotal);\n      }\n\n      if (nextProps.running_order) {\n        this.setState({\n          alreadyRunningOrders: true\n        });\n      }\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      document.getElementsByTagName(\"body\")[0].classList.remove(\"bg-grey\");\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      if (this.state.userBan) {\n        return React.createElement(UserBan, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 385\n          },\n          __self: this\n        });\n      }\n\n      if (window.innerWidth > 768) {\n        return React.createElement(Redirect, {\n          to: \"/\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 388\n          },\n          __self: this\n        });\n      }\n\n      if (localStorage.getItem(\"storeColor\") === null) {\n        return React.createElement(Redirect, {\n          to: \"/\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 391\n          },\n          __self: this\n        });\n      }\n\n      if (!this.props.cartProducts.length) {\n        document.getElementsByTagName(\"body\")[0].classList.remove(\"bg-grey\");\n      }\n\n      var _this$props5 = this.props,\n          cartTotal = _this$props5.cartTotal,\n          cartProducts = _this$props5.cartProducts,\n          restaurant_info = _this$props5.restaurant_info;\n      return React.createElement(React.Fragment, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 399\n        },\n        __self: this\n      }, React.createElement(Meta, {\n        seotitle: localStorage.getItem(\"cartPageTitle\"),\n        seodescription: localStorage.getItem(\"seoMetaDescription\"),\n        ogtype: \"website\",\n        ogtitle: localStorage.getItem(\"seoOgTitle\"),\n        ogdescription: localStorage.getItem(\"seoOgDescription\"),\n        ogurl: window.location.href,\n        twittertitle: localStorage.getItem(\"seoTwitterTitle\"),\n        twitterdescription: localStorage.getItem(\"seoTwitterDescription\"),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 400\n        },\n        __self: this\n      }), (this.state.loading || this.state.process_distance_calc_loading || this.state.process_cart_loading) && React.createElement(\"div\", {\n        className: \"height-100 overlay-loading ongoing-payment-spin\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 414\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"spin-load\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 415\n        },\n        __self: this\n      })), !this.state.loading && React.createElement(React.Fragment, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 420\n        },\n        __self: this\n      }, React.createElement(BackWithSearch, {\n        boxshadow: true,\n        has_title: true,\n        title: localStorage.getItem(\"cartPageTitle\"),\n        disable_search: true,\n        homeButton: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 421\n        },\n        __self: this\n      }), cartProducts.length ? React.createElement(React.Fragment, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 429\n        },\n        __self: this\n      }, localStorage.getItem(\"customCartMessage\") !== \"<p><br></p>\" && localStorage.getItem(\"customCartMessage\") !== \"null\" && localStorage.getItem(\"customCartMessage\") !== \"\" && React.createElement(\"div\", {\n        style: {\n          position: \"relative\",\n          paddingTop: \"4rem\",\n          marginBottom: \"-3rem\"\n        },\n        dangerouslySetInnerHTML: {\n          __html: localStorage.getItem(\"customCartMessage\")\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 433\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 445\n        },\n        __self: this\n      }, React.createElement(RestaurantInfoCart, {\n        restaurant: restaurant_info,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 446\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"block-content block-content-full bg-white pt-10 pb-5\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 447\n        },\n        __self: this\n      }, React.createElement(\"h2\", {\n        className: \"item-text mb-10\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 448\n        },\n        __self: this\n      }, localStorage.getItem(\"cartItemsInCartText\")), cartProducts.map(function (item, index) {\n        return React.createElement(CartItems, {\n          item: item,\n          addProductQuantity: _this3.addProductQuantity,\n          removeProductQuantity: _this3.removeProductQuantity,\n          removeProduct: _this3.removeProduct,\n          key: item.name + item.id + index,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 452\n          },\n          __self: this\n        });\n      })), React.createElement(OrderComment, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 461\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 464\n        },\n        __self: this\n      }, React.createElement(Coupon, {\n        subtotal: this.props.cartTotal.totalPrice,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 465\n        },\n        __self: this\n      }), this.state.alreadyRunningOrders && React.createElement(\"div\", {\n        className: \"auth-error ongoing-order-notify\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 467\n        },\n        __self: this\n      }, React.createElement(DelayLink, {\n        to: \"/my-orders\",\n        delay: 250,\n        className: \"ml-2\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 468\n        },\n        __self: this\n      }, localStorage.getItem(\"ongoingOrderMsg\"), \" \", React.createElement(\"i\", {\n        className: \"si si-arrow-right ml-1\",\n        style: {\n          fontSize: \"0.7rem\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 470\n        },\n        __self: this\n      }), React.createElement(Ink, {\n        duration: \"500\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 476\n        },\n        __self: this\n      })))), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 481\n        },\n        __self: this\n      }, React.createElement(BillDetails, {\n        total: cartTotal.totalPrice,\n        distance: this.state.distance,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 482\n        },\n        __self: this\n      })), this.state.is_operational_loading ? React.createElement(Loading, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 486\n        },\n        __self: this\n      }) : React.createElement(React.Fragment, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 488\n        },\n        __self: this\n      }, this.state.is_active ? React.createElement(React.Fragment, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 490\n        },\n        __self: this\n      }, this.state.min_order_satisfied ? React.createElement(React.Fragment, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 492\n        },\n        __self: this\n      }, this.state.is_all_items_available && React.createElement(CartCheckoutBlock, {\n        restaurant_id: this.props.restaurant_info.id,\n        cart_page: this.context.router.route.location.pathname,\n        is_operational_loading: this.state.is_operational_loading,\n        is_operational: this.state.is_operational,\n        handleProcessCartLoading: this.handleProcessCartLoading,\n        checkForItemsAvailability: this.checkForItemsAvailability,\n        handleItemsAvailability: this.handleItemsAvailability,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 494\n        },\n        __self: this\n      })) : React.createElement(\"div\", {\n        className: \"auth-error no-click\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 510\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"error-shake\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 511\n        },\n        __self: this\n      }, localStorage.getItem(\"restaurantMinOrderMessage\"), \" \", localStorage.getItem(\"currencySymbolAlign\") === \"left\" && localStorage.getItem(\"currencyFormat\"), this.props.restaurant_info.min_order_price, localStorage.getItem(\"currencySymbolAlign\") === \"right\" && localStorage.getItem(\"currencyFormat\")))) : React.createElement(\"div\", {\n        className: \"auth-error no-click\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 523\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"error-shake\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 524\n        },\n        __self: this\n      }, this.props.restaurant_info && this.props.restaurant_info.name, \" :\", \" \", localStorage.getItem(\"notAcceptingOrdersMsg\"))))) : React.createElement(\"div\", {\n        className: \"bg-white cart-empty-block\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 534\n        },\n        __self: this\n      }, React.createElement(\"img\", {\n        className: \"cart-empty-img\",\n        src: \"/assets/img/cart-empty.png\",\n        alt: localStorage.getItem(\"cartEmptyText\"),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 535\n        },\n        __self: this\n      }), React.createElement(\"h2\", {\n        className: \"cart-empty-text mt-50 text-center\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 540\n        },\n        __self: this\n      }, localStorage.getItem(\"cartEmptyText\")), this.state.alreadyRunningOrders && React.createElement(\"div\", {\n        className: \"auth-error ongoing-order-notify\",\n        style: {\n          position: \"fixed\",\n          bottom: \"4.5rem\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 544\n        },\n        __self: this\n      }, React.createElement(DelayLink, {\n        to: \"/my-orders\",\n        delay: 250,\n        className: \"ml-2\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 551\n        },\n        __self: this\n      }, localStorage.getItem(\"ongoingOrderMsg\"), \" \", React.createElement(\"i\", {\n        className: \"si si-arrow-right ml-1\",\n        style: {\n          fontSize: \"0.7rem\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 553\n        },\n        __self: this\n      }), React.createElement(Ink, {\n        duration: \"500\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 554\n        },\n        __self: this\n      }))), React.createElement(Footer, {\n        active_cart: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 558\n        },\n        __self: this\n      }))));\n    }\n  }]);\n\n  return Cart;\n}(Component);\n\nCart.contextTypes = {\n  router: function router() {\n    return null;\n  }\n};\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    restaurant_info: state.items.restaurant_info,\n    cartProducts: state.cart.products,\n    cartTotal: state.total.data,\n    user: state.user.user,\n    running_order: state.user.running_order,\n    restaurant: state.restaurant,\n    coupon: state.coupon.coupon\n  };\n};\n\nexport default GoogleApiWrapper({\n  apiKey: localStorage.getItem(\"googleApiKey\"),\n  LoadingContainer: Loading\n})(connect(mapStateToProps, {\n  checkUserRunningOrder: checkUserRunningOrder,\n  updateCart: updateCart,\n  getRestaurantInfoById: getRestaurantInfoById,\n  updateUserInfo: updateUserInfo,\n  addProduct: addProduct,\n  checkCartItemsAvailability: checkCartItemsAvailability,\n  checkBan: checkBan,\n  getRestaurantInfoAndOperationalStatus: getRestaurantInfoAndOperationalStatus,\n  removeCoupon: removeCoupon\n})(Cart));","map":{"version":3,"sources":["/opt/lampp/htdocs/shawarma/src/components/Mobile/Cart/index.js"],"names":["React","Component","checkUserRunningOrder","updateUserInfo","checkBan","BackWithSearch","BillDetails","CartCheckoutBlock","CartItems","Coupon","DelayLink","Footer","Ink","Meta","OrderComment","Redirect","RestaurantInfoCart","calculateDistance","calculateDistanceGoogle","connect","getRestaurantInfoById","getRestaurantInfoAndOperationalStatus","updateCart","formatPrice","addProduct","checkCartItemsAvailability","GoogleApiWrapper","Loading","UserBan","removeCoupon","Cart","state","loading","alreadyRunningOrders","is_operational_loading","is_operational","distance","is_active","min_order_satisfied","process_cart_loading","is_all_items_available","process_distance_calc_loading","userBan","fetchCheckBanAgain","token","props","then","response","success","setState","cartOperationalSteps","user","cartProducts","length","document","getElementsByTagName","classList","add","checkForItemsAvailability","localStorage","getItem","payload","id","__doesRestaurantOperatesAtThisLocation","data","auth_token","updatedUser","userSetAddress","lat","default_address","latitude","lng","longitude","address","house","tag","saveUserSetAddress","Promise","resolve","setItem","JSON","stringify","restaurant_info","console","warn","addProductQuantity","product","productAlreadyInCart","forEach","cp","selectedaddons","quantity","push","removeProductQuantity","index","findIndex","p","splice","removeProduct","self","google","log","__processRestaurantOperationalState","parse","window","location","reload","__isRestaurantActive","__checkMinOrderSatisfied","cartTotal","min_order_price","totalPrice","parseFloat","minOrderPrice","handleProcessCartLoading","filter","includes","map","item","handleItemsAvailability","value","setTimeout","nextProps","running_order","remove","innerWidth","href","position","paddingTop","marginBottom","__html","name","fontSize","context","router","route","pathname","bottom","contextTypes","mapStateToProps","items","cart","products","total","restaurant","coupon","apiKey","LoadingContainer"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\n\r\nimport { checkUserRunningOrder, updateUserInfo, checkBan } from \"../../../services/user/actions\";\r\n\r\nimport BackWithSearch from \"../../Mobile/Elements/BackWithSearch\";\r\nimport BillDetails from \"./BillDetails\";\r\nimport CartCheckoutBlock from \"./CartCheckoutBlock\";\r\nimport CartItems from \"./CartItems\";\r\nimport Coupon from \"./Coupon\";\r\nimport DelayLink from \"../../helpers/delayLink\";\r\nimport Footer from \"../Footer\";\r\nimport Ink from \"react-ink\";\r\nimport Meta from \"../../helpers/meta\";\r\nimport OrderComment from \"./OrderComment\";\r\nimport { Redirect } from \"react-router\";\r\nimport RestaurantInfoCart from \"./RestaurantInfoCart\";\r\nimport { calculateDistance } from \"../../helpers/calculateDistance\";\r\nimport calculateDistanceGoogle from \"../../helpers/calculateDistanceGoogle.js\";\r\nimport { connect } from \"react-redux\";\r\nimport { getRestaurantInfoById, getRestaurantInfoAndOperationalStatus } from \"../../../services/items/actions\";\r\nimport { updateCart } from \"../../../services/total/actions\";\r\nimport { formatPrice } from \"../../helpers/formatPrice\";\r\nimport { addProduct } from \"../../../services/cart/actions\";\r\nimport { checkCartItemsAvailability } from \"../../../services/confirmCart/actions\";\r\nimport { GoogleApiWrapper } from \"google-maps-react\";\r\nimport Loading from \"../../helpers/loading\";\r\nimport UserBan from \"../UserBan\";\r\nimport { removeCoupon } from \"../../../services/coupon/actions\";\r\n\r\nclass Cart extends Component {\r\n\tstatic contextTypes = {\r\n\t\trouter: () => null,\r\n\t};\r\n\r\n\tstate = {\r\n\t\tloading: true,\r\n\t\talreadyRunningOrders: false,\r\n\t\tis_operational_loading: true,\r\n\t\tis_operational: true,\r\n\t\tdistance: 0,\r\n\t\tis_active: false,\r\n\t\tmin_order_satisfied: false,\r\n\t\tprocess_cart_loading: false,\r\n\t\tis_all_items_available: false,\r\n\t\tprocess_distance_calc_loading: false,\r\n\t\tuserBan: false,\r\n\t};\r\n\r\n\tcomponentDidMount() {\r\n\t\tconst { user } = this.props;\r\n\t\tif (user.success) {\r\n\t\t\tthis.props.checkBan(user.data.auth_token).then((response) => {\r\n\t\t\t\tif (response) {\r\n\t\t\t\t\tif (!response.success) {\r\n\t\t\t\t\t\tthis.setState({ userBan: true, loading: false });\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.cartOperationalSteps();\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\tthis.fetchCheckBanAgain(user.data.auth_token);\r\n\t\t\t\t\t}, 2500);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tthis.cartOperationalSteps();\r\n\t\t}\r\n\t}\r\n\r\n\tfetchCheckBanAgain = (token) => {\r\n\t\tthis.props.checkBan(token).then((response) => {\r\n\t\t\tif (response) {\r\n\t\t\t\tif (!response.success) {\r\n\t\t\t\t\tthis.setState({ userBan: true, loading: false });\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.cartOperationalSteps();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t};\r\n\r\n\tcartOperationalSteps = () => {\r\n\t\tconst { user } = this.props;\r\n\r\n\t\tthis.setState({ loading: false });\r\n\t\tif (this.props.cartProducts.length) {\r\n\t\t\tdocument.getElementsByTagName(\"body\")[0].classList.add(\"bg-grey\");\r\n\t\t\tthis.checkForItemsAvailability();\r\n\t\t}\r\n\r\n\t\tif (localStorage.getItem(\"activeRestaurant\") !== null) {\r\n\t\t\tthis.props.getRestaurantInfoById(localStorage.getItem(\"activeRestaurant\")).then((response) => {\r\n\t\t\t\tif (response) {\r\n\t\t\t\t\tif (response.payload.id) {\r\n\t\t\t\t\t\tif (!user.success) {\r\n\t\t\t\t\t\t\tthis.__doesRestaurantOperatesAtThisLocation(response.payload);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tif (user.success) {\r\n\t\t\tthis.props.checkUserRunningOrder(user.data.id, user.data.auth_token);\r\n\t\t\tthis.props.updateUserInfo(user.data.id, user.data.auth_token).then((updatedUser) => {\r\n\t\t\t\t// console.log(\"THIS SHOULD BE CALLED: UPDATED USER\", updatedUser);\r\n\t\t\t\tif (typeof updatedUser !== \"undefined\") {\r\n\t\t\t\t\tconst userSetAddress = {\r\n\t\t\t\t\t\tlat: updatedUser.payload.data.default_address.latitude,\r\n\t\t\t\t\t\tlng: updatedUser.payload.data.default_address.longitude,\r\n\t\t\t\t\t\taddress: updatedUser.payload.data.default_address.address,\r\n\t\t\t\t\t\thouse: updatedUser.payload.data.default_address.house,\r\n\t\t\t\t\t\ttag: updatedUser.payload.data.default_address.tag,\r\n\t\t\t\t\t};\r\n\r\n\t\t\t\t\tconst saveUserSetAddress = new Promise((resolve) => {\r\n\t\t\t\t\t\tlocalStorage.setItem(\"userSetAddress\", JSON.stringify(userSetAddress));\r\n\t\t\t\t\t\tresolve(\"Address Saved\");\r\n\t\t\t\t\t});\r\n\t\t\t\t\tsaveUserSetAddress.then(() => {\r\n\t\t\t\t\t\tthis.__doesRestaurantOperatesAtThisLocation(this.props.restaurant_info);\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\t// localStorage.setItem(\"userSetAddress\", JSON.stringify(userSetAddress));\r\n\t\t\t\t} else {\r\n\t\t\t\t\tconsole.warn(\"Failed to fetch update user info... Solution: Reload Page\");\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tthis.setState({ alreadyRunningOrders: false });\r\n\t\t}\r\n\t};\r\n\r\n\tcomponentWillReceiveProps(nextProps) {\r\n\t\tif (nextProps.restaurant_info.id) {\r\n\t\t\tthis.__isRestaurantActive(nextProps.restaurant_info);\r\n\r\n\t\t\tthis.__checkMinOrderSatisfied(nextProps.restaurant_info, nextProps.cartTotal);\r\n\t\t}\r\n\r\n\t\tif (nextProps.running_order) {\r\n\t\t\tthis.setState({ alreadyRunningOrders: true });\r\n\t\t}\r\n\t}\r\n\r\n\taddProductQuantity = (product) => {\r\n\t\tconst { cartProducts, updateCart } = this.props;\r\n\t\tlet productAlreadyInCart = false;\r\n\r\n\t\tcartProducts.forEach((cp) => {\r\n\t\t\tif (cp.id === product.id) {\r\n\t\t\t\tif (JSON.stringify(cp.selectedaddons) === JSON.stringify(product.selectedaddons)) {\r\n\t\t\t\t\tcp.quantity += 1;\r\n\t\t\t\t\tproductAlreadyInCart = true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tif (!productAlreadyInCart) {\r\n\t\t\tcartProducts.push(product);\r\n\t\t}\r\n\r\n\t\tupdateCart(cartProducts);\r\n\t};\r\n\r\n\tremoveProductQuantity = (product) => {\r\n\t\tconst { cartProducts, updateCart } = this.props;\r\n\r\n\t\tconst index = cartProducts.findIndex(\r\n\t\t\t(p) => p.id === product.id && JSON.stringify(p) === JSON.stringify(product)\r\n\t\t);\r\n\t\t//if product is in the cart then index will be greater than 0\r\n\t\tif (index >= 0) {\r\n\t\t\tcartProducts.forEach((cp) => {\r\n\t\t\t\tif (cp.id === product.id) {\r\n\t\t\t\t\tif (JSON.stringify(cp) === JSON.stringify(product)) {\r\n\t\t\t\t\t\tif (cp.quantity === 1) {\r\n\t\t\t\t\t\t\t//if quantity is 1 then remove product from cart\r\n\t\t\t\t\t\t\tcartProducts.splice(index, 1);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t//else decrement the quantity by 1\r\n\t\t\t\t\t\t\tcp.quantity -= 1;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tupdateCart(cartProducts);\r\n\t\t\tthis.props.removeCoupon();\r\n\t\t}\r\n\t};\r\n\r\n\tremoveProduct = (product) => {\r\n\t\t// console.log(product);\r\n\t\t// console.log(product.id);\r\n\r\n\t\tconst { cartProducts, updateCart } = this.props;\r\n\t\tconst index = cartProducts.findIndex((cp) => cp.id === product.id);\r\n\r\n\t\t// console.log(index);\r\n\t\tcartProducts.splice(index, 1);\r\n\t\t// console.log(cartProducts);\r\n\t\tupdateCart(cartProducts);\r\n\t\tthis.props.removeCoupon();\r\n\t\tthis.checkForItemsAvailability();\r\n\t};\r\n\r\n\t__doesRestaurantOperatesAtThisLocation = (restaurant_info) => {\r\n\t\t//send user lat long to helper, check with the current restaurant lat long and setstate accordingly\r\n\t\tconst { user } = this.props;\r\n\t\tif (user.success) {\r\n\t\t\tvar distance = 0;\r\n\t\t\tlet self = this;\r\n\r\n\t\t\tif (localStorage.getItem(\"enGDMA\") === \"true\") {\r\n\t\t\t\tthis.setState({ process_distance_calc_loading: true });\r\n\t\t\t\tdistance = calculateDistanceGoogle(\r\n\t\t\t\t\trestaurant_info.longitude,\r\n\t\t\t\t\trestaurant_info.latitude,\r\n\t\t\t\t\tuser.data.default_address.longitude,\r\n\t\t\t\t\tuser.data.default_address.latitude,\r\n\t\t\t\t\tthis.props.google,\r\n\t\t\t\t\tfunction(distance) {\r\n\t\t\t\t\t\tconsole.log(\"Distance:\", distance);\r\n\t\t\t\t\t\tself.setState(\r\n\t\t\t\t\t\t\t{ distance: distance, process_distance_calc_loading: false },\r\n\t\t\t\t\t\t\t// self.__processRestaurantOperationalState(distance, restaurant_info)\r\n\t\t\t\t\t\t\tself.__processRestaurantOperationalState(\r\n\t\t\t\t\t\t\t\trestaurant_info.id,\r\n\t\t\t\t\t\t\t\tuser.data.default_address.latitude,\r\n\t\t\t\t\t\t\t\tuser.data.default_address.longitude\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t}\r\n\t\t\t\t);\r\n\t\t\t} else {\r\n\t\t\t\tconst distance = calculateDistance(\r\n\t\t\t\t\trestaurant_info.longitude,\r\n\t\t\t\t\trestaurant_info.latitude,\r\n\t\t\t\t\tuser.data.default_address.longitude,\r\n\t\t\t\t\tuser.data.default_address.latitude\r\n\t\t\t\t);\r\n\t\t\t\tthis.setState(\r\n\t\t\t\t\t{ distance: distance },\r\n\t\t\t\t\tthis.__processRestaurantOperationalState(\r\n\t\t\t\t\t\trestaurant_info.id,\r\n\t\t\t\t\t\tuser.data.default_address.latitude,\r\n\t\t\t\t\t\tuser.data.default_address.longitude\r\n\t\t\t\t\t)\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\t//if Google Distance Matrix API is enabled\r\n\t\t\tlet self = this;\r\n\t\t\tif (localStorage.getItem(\"enGDMA\") === \"true\") {\r\n\t\t\t\tdistance = calculateDistanceGoogle(\r\n\t\t\t\t\trestaurant_info.longitude,\r\n\t\t\t\t\trestaurant_info.latitude,\r\n\t\t\t\t\tJSON.parse(localStorage.getItem(\"userSetAddress\")).lng,\r\n\t\t\t\t\tJSON.parse(localStorage.getItem(\"userSetAddress\")).lat,\r\n\t\t\t\t\tthis.props.google,\r\n\t\t\t\t\tfunction(distance) {\r\n\t\t\t\t\t\tconsole.log(distance);\r\n\t\t\t\t\t\tself.setState(\r\n\t\t\t\t\t\t\t{ distance: distance },\r\n\t\t\t\t\t\t\tself.__processRestaurantOperationalState(\r\n\t\t\t\t\t\t\t\trestaurant_info.id,\r\n\t\t\t\t\t\t\t\tJSON.parse(localStorage.getItem(\"userSetAddress\")).lat,\r\n\t\t\t\t\t\t\t\tJSON.parse(localStorage.getItem(\"userSetAddress\")).lng\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t}\r\n\t\t\t\t);\r\n\t\t\t} else {\r\n\t\t\t\tdistance = calculateDistance(\r\n\t\t\t\t\trestaurant_info.longitude,\r\n\t\t\t\t\trestaurant_info.latitude,\r\n\t\t\t\t\tJSON.parse(localStorage.getItem(\"userSetAddress\")).lng,\r\n\t\t\t\t\tJSON.parse(localStorage.getItem(\"userSetAddress\")).lat\r\n\t\t\t\t);\r\n\t\t\t\tthis.setState(\r\n\t\t\t\t\t{ distance: distance },\r\n\t\t\t\t\tthis.__processRestaurantOperationalState(\r\n\t\t\t\t\t\trestaurant_info.id,\r\n\t\t\t\t\t\tJSON.parse(localStorage.getItem(\"userSetAddress\")).lat,\r\n\t\t\t\t\t\tJSON.parse(localStorage.getItem(\"userSetAddress\")).lng\r\n\t\t\t\t\t)\r\n\t\t\t\t);\r\n\t\t\t}\r\n\r\n\t\t\tconsole.log(\"Distance -> \", this.state.distance);\r\n\r\n\t\t\t// console.log(distance);\r\n\t\t}\r\n\t};\r\n\t__processRestaurantOperationalState = (id, lat, lng) => {\r\n\t\tthis.props.getRestaurantInfoAndOperationalStatus(id, lat, lng).then((response) => {\r\n\t\t\tif (response) {\r\n\t\t\t\tif (response.payload.is_operational) {\r\n\t\t\t\t\tthis.setState({\r\n\t\t\t\t\t\tis_operational: true,\r\n\t\t\t\t\t\tis_operational_loading: false,\r\n\t\t\t\t\t});\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.setState({\r\n\t\t\t\t\t\tis_operational: false,\r\n\t\t\t\t\t\tis_operational_loading: false,\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\twindow.location.reload();\r\n\t\t\t}\r\n\t\t});\r\n\t};\r\n\t__isRestaurantActive = (restaurant_info) => {\r\n\t\tif (restaurant_info.is_active) {\r\n\t\t\tthis.setState({\r\n\t\t\t\tis_active: true,\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n\r\n\t__checkMinOrderSatisfied = (restaurant_info, cartTotal) => {\r\n\t\tif (restaurant_info.min_order_price > 0) {\r\n\t\t\t//if not null, then check the min order price with the order total\r\n\t\t\tconst totalPrice = parseFloat(formatPrice(cartTotal.totalPrice));\r\n\t\t\tconst minOrderPrice = parseFloat(formatPrice(restaurant_info.min_order_price));\r\n\t\t\tif (totalPrice >= minOrderPrice) {\r\n\t\t\t\t// console.log(\"Order Can Be Placed\", totalPrice + \" -- \" + minOrderPrice);\r\n\t\t\t\tthis.setState({ min_order_satisfied: true });\r\n\t\t\t} else {\r\n\t\t\t\t// console.log(\"Order CANNOT Be Placed\", totalPrice + \" -- \" + minOrderPrice);\r\n\t\t\t\tthis.setState({ min_order_satisfied: false });\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\t// if null, then set to satisfied to true...\r\n\t\t\t// console.log(\"Min order price is not set\");\r\n\t\t\tthis.setState({ min_order_satisfied: true });\r\n\t\t}\r\n\t};\r\n\r\n\tcheckForItemsAvailability = () => {\r\n\t\tconst { checkCartItemsAvailability, cartProducts, addProduct, updateCart } = this.props;\r\n\t\tthis.handleProcessCartLoading(true);\r\n\t\tcheckCartItemsAvailability(cartProducts).then((response) => {\r\n\t\t\tthis.handleProcessCartLoading(false);\r\n\t\t\tthis.setState({ process_cart_loading: false });\r\n\t\t\tif (response && response.length) {\r\n\t\t\t\t//get inactive items and mark as is_active 0\r\n\t\t\t\tcartProducts\r\n\t\t\t\t\t.filter(({ id }) => response.includes(id))\r\n\t\t\t\t\t.map((item) => {\r\n\t\t\t\t\t\titem.is_active = 0;\r\n\t\t\t\t\t\taddProduct(item);\r\n\t\t\t\t\t\treturn item;\r\n\t\t\t\t\t});\r\n\t\t\t\tthis.handleItemsAvailability(false);\r\n\t\t\t} else {\r\n\t\t\t\t//if response length is 0 that means all items in cart are available, make all active\r\n\t\t\t\tcartProducts.map((item) => {\r\n\t\t\t\t\titem.is_active = 1;\r\n\t\t\t\t\taddProduct(item);\r\n\t\t\t\t\treturn item;\r\n\t\t\t\t});\r\n\t\t\t\tthis.handleItemsAvailability(true);\r\n\t\t\t}\r\n\t\t\tupdateCart(this.props.cartProducts);\r\n\t\t});\r\n\t};\r\n\r\n\thandleProcessCartLoading = (value) => {\r\n\t\tthis.setState({ process_cart_loading: value });\r\n\t};\r\n\r\n\thandleItemsAvailability = (value) => {\r\n\t\tthis.setState({ is_all_items_available: value });\r\n\t};\r\n\r\n\tcomponentWillUnmount() {\r\n\t\tdocument.getElementsByTagName(\"body\")[0].classList.remove(\"bg-grey\");\r\n\t}\r\n\r\n\trender() {\r\n\t\tif (this.state.userBan) {\r\n\t\t\treturn <UserBan />;\r\n\t\t}\r\n\t\tif (window.innerWidth > 768) {\r\n\t\t\treturn <Redirect to=\"/\" />;\r\n\t\t}\r\n\t\tif (localStorage.getItem(\"storeColor\") === null) {\r\n\t\t\treturn <Redirect to={\"/\"} />;\r\n\t\t}\r\n\t\tif (!this.props.cartProducts.length) {\r\n\t\t\tdocument.getElementsByTagName(\"body\")[0].classList.remove(\"bg-grey\");\r\n\t\t}\r\n\t\tconst { cartTotal, cartProducts, restaurant_info } = this.props;\r\n\r\n\t\treturn (\r\n\t\t\t<React.Fragment>\r\n\t\t\t\t<Meta\r\n\t\t\t\t\tseotitle={localStorage.getItem(\"cartPageTitle\")}\r\n\t\t\t\t\tseodescription={localStorage.getItem(\"seoMetaDescription\")}\r\n\t\t\t\t\togtype=\"website\"\r\n\t\t\t\t\togtitle={localStorage.getItem(\"seoOgTitle\")}\r\n\t\t\t\t\togdescription={localStorage.getItem(\"seoOgDescription\")}\r\n\t\t\t\t\togurl={window.location.href}\r\n\t\t\t\t\ttwittertitle={localStorage.getItem(\"seoTwitterTitle\")}\r\n\t\t\t\t\ttwitterdescription={localStorage.getItem(\"seoTwitterDescription\")}\r\n\t\t\t\t/>\r\n\r\n\t\t\t\t{(this.state.loading ||\r\n\t\t\t\t\tthis.state.process_distance_calc_loading ||\r\n\t\t\t\t\tthis.state.process_cart_loading) && (\r\n\t\t\t\t\t<div className=\"height-100 overlay-loading ongoing-payment-spin\">\r\n\t\t\t\t\t\t<div className=\"spin-load\" />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t)}\r\n\r\n\t\t\t\t{!this.state.loading && (\r\n\t\t\t\t\t<React.Fragment>\r\n\t\t\t\t\t\t<BackWithSearch\r\n\t\t\t\t\t\t\tboxshadow={true}\r\n\t\t\t\t\t\t\thas_title={true}\r\n\t\t\t\t\t\t\ttitle={localStorage.getItem(\"cartPageTitle\")}\r\n\t\t\t\t\t\t\tdisable_search={true}\r\n\t\t\t\t\t\t\thomeButton={true}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t{cartProducts.length ? (\r\n\t\t\t\t\t\t\t<React.Fragment>\r\n\t\t\t\t\t\t\t\t{localStorage.getItem(\"customCartMessage\") !== \"<p><br></p>\" &&\r\n\t\t\t\t\t\t\t\t\tlocalStorage.getItem(\"customCartMessage\") !== \"null\" &&\r\n\t\t\t\t\t\t\t\t\t(localStorage.getItem(\"customCartMessage\") !== \"\" && (\r\n\t\t\t\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\t\t\t\t\tposition: \"relative\",\r\n\t\t\t\t\t\t\t\t\t\t\t\tpaddingTop: \"4rem\",\r\n\t\t\t\t\t\t\t\t\t\t\t\tmarginBottom: \"-3rem\",\r\n\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t\tdangerouslySetInnerHTML={{\r\n\t\t\t\t\t\t\t\t\t\t\t\t__html: localStorage.getItem(\"customCartMessage\"),\r\n\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t))}\r\n\r\n\t\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t\t<RestaurantInfoCart restaurant={restaurant_info} />\r\n\t\t\t\t\t\t\t\t\t<div className=\"block-content block-content-full bg-white pt-10 pb-5\">\r\n\t\t\t\t\t\t\t\t\t\t<h2 className=\"item-text mb-10\">\r\n\t\t\t\t\t\t\t\t\t\t\t{localStorage.getItem(\"cartItemsInCartText\")}\r\n\t\t\t\t\t\t\t\t\t\t</h2>\r\n\t\t\t\t\t\t\t\t\t\t{cartProducts.map((item, index) => (\r\n\t\t\t\t\t\t\t\t\t\t\t<CartItems\r\n\t\t\t\t\t\t\t\t\t\t\t\titem={item}\r\n\t\t\t\t\t\t\t\t\t\t\t\taddProductQuantity={this.addProductQuantity}\r\n\t\t\t\t\t\t\t\t\t\t\t\tremoveProductQuantity={this.removeProductQuantity}\r\n\t\t\t\t\t\t\t\t\t\t\t\tremoveProduct={this.removeProduct}\r\n\t\t\t\t\t\t\t\t\t\t\t\tkey={item.name + item.id + index}\r\n\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t<OrderComment />\r\n\t\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t\t<Coupon subtotal={this.props.cartTotal.totalPrice} />\r\n\t\t\t\t\t\t\t\t\t{this.state.alreadyRunningOrders && (\r\n\t\t\t\t\t\t\t\t\t\t<div className=\"auth-error ongoing-order-notify\">\r\n\t\t\t\t\t\t\t\t\t\t\t<DelayLink to=\"/my-orders\" delay={250} className=\"ml-2\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t{localStorage.getItem(\"ongoingOrderMsg\")}{\" \"}\r\n\t\t\t\t\t\t\t\t\t\t\t\t<i\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"si si-arrow-right ml-1\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tfontSize: \"0.7rem\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Ink duration=\"500\" />\r\n\t\t\t\t\t\t\t\t\t\t\t</DelayLink>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t\t<BillDetails total={cartTotal.totalPrice} distance={this.state.distance} />\r\n\t\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t\t{this.state.is_operational_loading ? (\r\n\t\t\t\t\t\t\t\t\t<Loading />\r\n\t\t\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t\t\t<React.Fragment>\r\n\t\t\t\t\t\t\t\t\t\t{this.state.is_active ? (\r\n\t\t\t\t\t\t\t\t\t\t\t<React.Fragment>\r\n\t\t\t\t\t\t\t\t\t\t\t\t{this.state.min_order_satisfied ? (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<React.Fragment>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{this.state.is_all_items_available && (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<CartCheckoutBlock\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\trestaurant_id={this.props.restaurant_info.id}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcart_page={this.context.router.route.location.pathname}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tis_operational_loading={\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.state.is_operational_loading\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tis_operational={this.state.is_operational}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\thandleProcessCartLoading={this.handleProcessCartLoading}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcheckForItemsAvailability={\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.checkForItemsAvailability\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\thandleItemsAvailability={this.handleItemsAvailability}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</React.Fragment>\r\n\t\t\t\t\t\t\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"auth-error no-click\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"error-shake\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{localStorage.getItem(\"restaurantMinOrderMessage\")}{\" \"}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{localStorage.getItem(\"currencySymbolAlign\") === \"left\" &&\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tlocalStorage.getItem(\"currencyFormat\")}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{this.props.restaurant_info.min_order_price}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{localStorage.getItem(\"currencySymbolAlign\") === \"right\" &&\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tlocalStorage.getItem(\"currencyFormat\")}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t\t\t</React.Fragment>\r\n\t\t\t\t\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"auth-error no-click\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"error-shake\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t{this.props.restaurant_info && this.props.restaurant_info.name} :{\" \"}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t{localStorage.getItem(\"notAcceptingOrdersMsg\")}\r\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t</React.Fragment>\r\n\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t</React.Fragment>\r\n\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t<div className=\"bg-white cart-empty-block\">\r\n\t\t\t\t\t\t\t\t<img\r\n\t\t\t\t\t\t\t\t\tclassName=\"cart-empty-img\"\r\n\t\t\t\t\t\t\t\t\tsrc=\"/assets/img/cart-empty.png\"\r\n\t\t\t\t\t\t\t\t\talt={localStorage.getItem(\"cartEmptyText\")}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t<h2 className=\"cart-empty-text mt-50 text-center\">\r\n\t\t\t\t\t\t\t\t\t{localStorage.getItem(\"cartEmptyText\")}\r\n\t\t\t\t\t\t\t\t</h2>\r\n\t\t\t\t\t\t\t\t{this.state.alreadyRunningOrders && (\r\n\t\t\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\t\t\tclassName=\"auth-error ongoing-order-notify\"\r\n\t\t\t\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\t\t\t\tposition: \"fixed\",\r\n\t\t\t\t\t\t\t\t\t\t\tbottom: \"4.5rem\",\r\n\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t<DelayLink to=\"/my-orders\" delay={250} className=\"ml-2\">\r\n\t\t\t\t\t\t\t\t\t\t\t{localStorage.getItem(\"ongoingOrderMsg\")}{\" \"}\r\n\t\t\t\t\t\t\t\t\t\t\t<i className=\"si si-arrow-right ml-1\" style={{ fontSize: \"0.7rem\" }} />\r\n\t\t\t\t\t\t\t\t\t\t\t<Ink duration=\"500\" />\r\n\t\t\t\t\t\t\t\t\t\t</DelayLink>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t<Footer active_cart={true} />\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t</React.Fragment>\r\n\t\t\t\t)}\r\n\t\t\t</React.Fragment>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nconst mapStateToProps = (state) => ({\r\n\trestaurant_info: state.items.restaurant_info,\r\n\tcartProducts: state.cart.products,\r\n\tcartTotal: state.total.data,\r\n\tuser: state.user.user,\r\n\trunning_order: state.user.running_order,\r\n\trestaurant: state.restaurant,\r\n\tcoupon: state.coupon.coupon,\r\n});\r\n\r\nexport default GoogleApiWrapper({\r\n\tapiKey: localStorage.getItem(\"googleApiKey\"),\r\n\tLoadingContainer: Loading,\r\n})(\r\n\tconnect(\r\n\t\tmapStateToProps,\r\n\t\t{\r\n\t\t\tcheckUserRunningOrder,\r\n\t\t\tupdateCart,\r\n\t\t\tgetRestaurantInfoById,\r\n\t\t\tupdateUserInfo,\r\n\t\t\taddProduct,\r\n\t\t\tcheckCartItemsAvailability,\r\n\t\t\tcheckBan,\r\n\t\t\tgetRestaurantInfoAndOperationalStatus,\r\n\t\t\tremoveCoupon,\r\n\t\t}\r\n\t)(Cart)\r\n);\r\n"]},"metadata":{},"sourceType":"module"}