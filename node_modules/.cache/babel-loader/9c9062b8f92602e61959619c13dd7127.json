{"ast":null,"code":"import _classCallCheck from \"/opt/lampp/htdocs/shawarma/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/opt/lampp/htdocs/shawarma/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/opt/lampp/htdocs/shawarma/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/opt/lampp/htdocs/shawarma/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/opt/lampp/htdocs/shawarma/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/opt/lampp/htdocs/shawarma/src/components/Mobile/Account/Addresses/index.js\";\nimport React, { Component } from \"react\";\nimport { deleteAddress, getAddresses, saveAddress, setDefaultAddress } from \"../../../../services/addresses/actions\";\nimport AddressList from \"./AddressList\";\nimport BackWithSearch from \"../../Elements/BackWithSearch\";\nimport ContentLoader from \"react-content-loader\";\nimport DelayLink from \"../../../helpers/delayLink\";\nimport Ink from \"react-ink\";\nimport { Redirect } from \"react-router\";\nimport { connect } from \"react-redux\";\nimport { updateUserInfo } from \"../../../../services/user/actions\";\nimport Loading from \"../../../helpers/loading\";\n\nvar Addresses =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Addresses, _Component);\n\n  function Addresses() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, Addresses);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(Addresses)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      no_address: false,\n      loading: false,\n      restaurant_id: null\n    };\n\n    _this.handleSaveNewAddress = function (data) {\n      var user = _this.props.user;\n\n      if (user.success) {\n        _this.setState({\n          loading: true\n        });\n\n        _this.props.saveAddress(user.data.id, user.data.auth_token, data);\n      }\n    };\n\n    _this.handleSetDefaultAddress = function (address_id, address) {\n      var user = _this.props.user;\n\n      if (user.success) {\n        _this.props.setDefaultAddress(user.data.id, address_id, user.data.auth_token).then(function () {\n          _this.setState({\n            loading: true\n          });\n\n          var saveUserSetAddress = new Promise(function (resolve) {\n            var userSetAddress = {\n              lat: address.latitude,\n              lng: address.longitude,\n              address: address.address,\n              house: address.house,\n              tag: address.tag\n            };\n            localStorage.setItem(\"userSetAddress\", JSON.stringify(userSetAddress));\n            resolve(\"Address Saved\");\n          });\n          saveUserSetAddress.then(function () {\n            _this.setState({\n              loading: false\n            }); // console.log(\"came here\");\n\n\n            _this.context.router.history.goBack();\n          });\n        });\n      }\n    };\n\n    _this.handleDeleteAddress = function (address_id) {\n      var user = _this.props.user;\n\n      if (user.success) {\n        _this.setState({\n          loading: true\n        });\n\n        _this.props.deleteAddress(user.data.id, address_id, user.data.auth_token);\n      }\n    };\n\n    return _this;\n  }\n\n  _createClass(Addresses, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      document.getElementsByTagName(\"body\")[0].classList.add(\"bg-light\");\n      var user = this.props.user;\n\n      if (typeof this.props.location.state !== \"undefined\") {\n        this.setState({\n          restaurant_id: this.props.location.state.restaurant_id\n        }, function () {\n          if (localStorage.getItem(\"storeColor\") !== null) {\n            if (user.success) {\n              _this2.props.getAddresses(user.data.id, user.data.auth_token, _this2.state.restaurant_id);\n\n              _this2.props.updateUserInfo(user.data.id, user.data.auth_token);\n            }\n          }\n        });\n      } else {\n        if (localStorage.getItem(\"storeColor\") !== null) {\n          if (user.success) {\n            this.props.getAddresses(user.data.id, user.data.auth_token, this.state.restaurant_id);\n            this.props.updateUserInfo(user.data.id, user.data.auth_token);\n          }\n        }\n      }\n    }\n  }, {\n    key: \"componentWillReceiveProps\",\n    value: function componentWillReceiveProps(nextProps) {\n      if (nextProps.addresses.length === 0) {\n        this.setState({\n          no_address: true,\n          loading: false\n        });\n      }\n\n      this.setState({\n        loading: false\n      });\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      document.getElementsByTagName(\"body\")[0].classList.remove(\"bg-light\");\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      if (window.innerWidth > 768) {\n        return React.createElement(Redirect, {\n          to: \"/\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 102\n          },\n          __self: this\n        });\n      }\n\n      if (localStorage.getItem(\"storeColor\") === null) {\n        return React.createElement(Redirect, {\n          to: \"/\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 106\n          },\n          __self: this\n        });\n      }\n\n      var _this$props = this.props,\n          addresses = _this$props.addresses,\n          user = _this$props.user;\n\n      if (!user.success) {\n        return React.createElement(Redirect, {\n          to: \"/login\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 112\n          },\n          __self: this\n        });\n      }\n\n      return React.createElement(React.Fragment, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 116\n        },\n        __self: this\n      }, this.state.loading ? React.createElement(Loading, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 118\n        },\n        __self: this\n      }) : React.createElement(React.Fragment, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 120\n        },\n        __self: this\n      }, React.createElement(BackWithSearch, {\n        boxshadow: true,\n        has_title: true,\n        title: localStorage.getItem(\"accountManageAddress\"),\n        disable_search: true,\n        homeButton: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 121\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"block-content block-content-full pt-80 pb-80 height-100-percent\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 128\n        },\n        __self: this\n      }, addresses.length === 0 && !this.state.no_address && React.createElement(ContentLoader, {\n        height: 600,\n        width: 400,\n        speed: 1.2,\n        primaryColor: \"#f3f3f3\",\n        secondaryColor: \"#ecebeb\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 130\n        },\n        __self: this\n      }, React.createElement(\"rect\", {\n        x: \"0\",\n        y: \"0\",\n        rx: \"0\",\n        ry: \"0\",\n        width: \"75\",\n        height: \"22\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 137\n        },\n        __self: this\n      }), React.createElement(\"rect\", {\n        x: \"0\",\n        y: \"30\",\n        rx: \"0\",\n        ry: \"0\",\n        width: \"350\",\n        height: \"18\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 138\n        },\n        __self: this\n      }), React.createElement(\"rect\", {\n        x: \"0\",\n        y: \"60\",\n        rx: \"0\",\n        ry: \"0\",\n        width: \"300\",\n        height: \"18\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 139\n        },\n        __self: this\n      }), React.createElement(\"rect\", {\n        x: \"0\",\n        y: \"90\",\n        rx: \"0\",\n        ry: \"0\",\n        width: \"100\",\n        height: \"18\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 140\n        },\n        __self: this\n      }), React.createElement(\"rect\", {\n        x: \"0\",\n        y: 0 + 170,\n        rx: \"0\",\n        ry: \"0\",\n        width: \"75\",\n        height: \"22\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 142\n        },\n        __self: this\n      }), React.createElement(\"rect\", {\n        x: \"0\",\n        y: 30 + 170,\n        rx: \"0\",\n        ry: \"0\",\n        width: \"350\",\n        height: \"18\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 143\n        },\n        __self: this\n      }), React.createElement(\"rect\", {\n        x: \"0\",\n        y: 60 + 170,\n        rx: \"0\",\n        ry: \"0\",\n        width: \"300\",\n        height: \"18\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 144\n        },\n        __self: this\n      }), React.createElement(\"rect\", {\n        x: \"0\",\n        y: 90 + 170,\n        rx: \"0\",\n        ry: \"0\",\n        width: \"100\",\n        height: \"18\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 145\n        },\n        __self: this\n      }), React.createElement(\"rect\", {\n        x: \"0\",\n        y: 0 + 340,\n        rx: \"0\",\n        ry: \"0\",\n        width: \"75\",\n        height: \"22\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 147\n        },\n        __self: this\n      }), React.createElement(\"rect\", {\n        x: \"0\",\n        y: 30 + 340,\n        rx: \"0\",\n        ry: \"0\",\n        width: \"350\",\n        height: \"18\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 148\n        },\n        __self: this\n      }), React.createElement(\"rect\", {\n        x: \"0\",\n        y: 60 + 340,\n        rx: \"0\",\n        ry: \"0\",\n        width: \"300\",\n        height: \"18\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 149\n        },\n        __self: this\n      }), React.createElement(\"rect\", {\n        x: \"0\",\n        y: 90 + 340,\n        rx: \"0\",\n        ry: \"0\",\n        width: \"100\",\n        height: \"18\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 150\n        },\n        __self: this\n      })), addresses.length ? addresses.map(function (address) {\n        return React.createElement(AddressList, {\n          handleDeleteAddress: _this3.handleDeleteAddress,\n          deleteButton: true,\n          key: address.id,\n          address: address,\n          user: user,\n          fromCartPage: _this3.state.restaurant_id === null ? false : true,\n          handleSetDefaultAddress: _this3.handleSetDefaultAddress,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 156\n          },\n          __self: this\n        });\n      }) : React.createElement(\"div\", {\n        className: \"text-center mt-50 font-w600 text-muted\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 167\n        },\n        __self: this\n      }, localStorage.getItem(\"noAddressText\"))), React.createElement(DelayLink, {\n        to: \"/search-location\",\n        className: \"btn-new-address\",\n        style: {\n          backgroundColor: localStorage.getItem(\"storeColor\"),\n          zIndex: \"2\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 172\n        },\n        __self: this\n      }, localStorage.getItem(\"buttonNewAddress\"), React.createElement(Ink, {\n        duration: 200,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 181\n        },\n        __self: this\n      }))));\n    }\n  }]);\n\n  return Addresses;\n}(Component);\n\nAddresses.contextTypes = {\n  router: function router() {\n    return null;\n  }\n};\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    user: state.user.user,\n    addresses: state.addresses.addresses\n  };\n};\n\nexport default connect(mapStateToProps, {\n  getAddresses: getAddresses,\n  saveAddress: saveAddress,\n  deleteAddress: deleteAddress,\n  updateUserInfo: updateUserInfo,\n  setDefaultAddress: setDefaultAddress\n})(Addresses);","map":{"version":3,"sources":["/opt/lampp/htdocs/shawarma/src/components/Mobile/Account/Addresses/index.js"],"names":["React","Component","deleteAddress","getAddresses","saveAddress","setDefaultAddress","AddressList","BackWithSearch","ContentLoader","DelayLink","Ink","Redirect","connect","updateUserInfo","Loading","Addresses","state","no_address","loading","restaurant_id","handleSaveNewAddress","data","user","props","success","setState","id","auth_token","handleSetDefaultAddress","address_id","address","then","saveUserSetAddress","Promise","resolve","userSetAddress","lat","latitude","lng","longitude","house","tag","localStorage","setItem","JSON","stringify","context","router","history","goBack","handleDeleteAddress","document","getElementsByTagName","classList","add","location","getItem","nextProps","addresses","length","remove","window","innerWidth","map","backgroundColor","zIndex","contextTypes","mapStateToProps"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport { deleteAddress, getAddresses, saveAddress, setDefaultAddress } from \"../../../../services/addresses/actions\";\r\n\r\nimport AddressList from \"./AddressList\";\r\nimport BackWithSearch from \"../../Elements/BackWithSearch\";\r\nimport ContentLoader from \"react-content-loader\";\r\nimport DelayLink from \"../../../helpers/delayLink\";\r\nimport Ink from \"react-ink\";\r\nimport { Redirect } from \"react-router\";\r\nimport { connect } from \"react-redux\";\r\nimport { updateUserInfo } from \"../../../../services/user/actions\";\r\nimport Loading from \"../../../helpers/loading\";\r\n\r\nclass Addresses extends Component {\r\n\tstatic contextTypes = {\r\n\t\trouter: () => null,\r\n\t};\r\n\r\n\tstate = {\r\n\t\tno_address: false,\r\n\t\tloading: false,\r\n\t\trestaurant_id: null,\r\n\t};\r\n\r\n\tcomponentDidMount() {\r\n\t\tdocument.getElementsByTagName(\"body\")[0].classList.add(\"bg-light\");\r\n\r\n\t\tconst { user } = this.props;\r\n\t\tif (typeof this.props.location.state !== \"undefined\") {\r\n\t\t\tthis.setState({ restaurant_id: this.props.location.state.restaurant_id }, () => {\r\n\t\t\t\tif (localStorage.getItem(\"storeColor\") !== null) {\r\n\t\t\t\t\tif (user.success) {\r\n\t\t\t\t\t\tthis.props.getAddresses(user.data.id, user.data.auth_token, this.state.restaurant_id);\r\n\t\t\t\t\t\tthis.props.updateUserInfo(user.data.id, user.data.auth_token);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tif (localStorage.getItem(\"storeColor\") !== null) {\r\n\t\t\t\tif (user.success) {\r\n\t\t\t\t\tthis.props.getAddresses(user.data.id, user.data.auth_token, this.state.restaurant_id);\r\n\t\t\t\t\tthis.props.updateUserInfo(user.data.id, user.data.auth_token);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tcomponentWillReceiveProps(nextProps) {\r\n\t\tif (nextProps.addresses.length === 0) {\r\n\t\t\tthis.setState({ no_address: true, loading: false });\r\n\t\t}\r\n\t\tthis.setState({ loading: false });\r\n\t}\r\n\r\n\thandleSaveNewAddress = (data) => {\r\n\t\tconst { user } = this.props;\r\n\t\tif (user.success) {\r\n\t\t\tthis.setState({ loading: true });\r\n\t\t\tthis.props.saveAddress(user.data.id, user.data.auth_token, data);\r\n\t\t}\r\n\t};\r\n\r\n\thandleSetDefaultAddress = (address_id, address) => {\r\n\t\tconst { user } = this.props;\r\n\t\tif (user.success) {\r\n\t\t\tthis.props.setDefaultAddress(user.data.id, address_id, user.data.auth_token).then(() => {\r\n\t\t\t\tthis.setState({ loading: true });\r\n\t\t\t\tconst saveUserSetAddress = new Promise((resolve) => {\r\n\t\t\t\t\tconst userSetAddress = {\r\n\t\t\t\t\t\tlat: address.latitude,\r\n\t\t\t\t\t\tlng: address.longitude,\r\n\t\t\t\t\t\taddress: address.address,\r\n\t\t\t\t\t\thouse: address.house,\r\n\t\t\t\t\t\ttag: address.tag,\r\n\t\t\t\t\t};\r\n\t\t\t\t\tlocalStorage.setItem(\"userSetAddress\", JSON.stringify(userSetAddress));\r\n\t\t\t\t\tresolve(\"Address Saved\");\r\n\t\t\t\t});\r\n\t\t\t\tsaveUserSetAddress.then(() => {\r\n\t\t\t\t\tthis.setState({ loading: false });\r\n\t\t\t\t\t// console.log(\"came here\");\r\n\t\t\t\t\tthis.context.router.history.goBack();\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n\r\n\thandleDeleteAddress = (address_id) => {\r\n\t\tconst { user } = this.props;\r\n\t\tif (user.success) {\r\n\t\t\tthis.setState({ loading: true });\r\n\t\t\tthis.props.deleteAddress(user.data.id, address_id, user.data.auth_token);\r\n\t\t}\r\n\t};\r\n\r\n\tcomponentWillUnmount() {\r\n\t\tdocument.getElementsByTagName(\"body\")[0].classList.remove(\"bg-light\");\r\n\t}\r\n\r\n\trender() {\r\n\t\tif (window.innerWidth > 768) {\r\n\t\t\treturn <Redirect to=\"/\" />;\r\n\t\t}\r\n\r\n\t\tif (localStorage.getItem(\"storeColor\") === null) {\r\n\t\t\treturn <Redirect to={\"/\"} />;\r\n\t\t}\r\n\r\n\t\tconst { addresses, user } = this.props;\r\n\r\n\t\tif (!user.success) {\r\n\t\t\treturn <Redirect to=\"/login\" />;\r\n\t\t}\r\n\r\n\t\treturn (\r\n\t\t\t<React.Fragment>\r\n\t\t\t\t{this.state.loading ? (\r\n\t\t\t\t\t<Loading />\r\n\t\t\t\t) : (\r\n\t\t\t\t\t<React.Fragment>\r\n\t\t\t\t\t\t<BackWithSearch\r\n\t\t\t\t\t\t\tboxshadow={true}\r\n\t\t\t\t\t\t\thas_title={true}\r\n\t\t\t\t\t\t\ttitle={localStorage.getItem(\"accountManageAddress\")}\r\n\t\t\t\t\t\t\tdisable_search={true}\r\n\t\t\t\t\t\t\thomeButton={true}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<div className=\"block-content block-content-full pt-80 pb-80 height-100-percent\">\r\n\t\t\t\t\t\t\t{addresses.length === 0 && !this.state.no_address && (\r\n\t\t\t\t\t\t\t\t<ContentLoader\r\n\t\t\t\t\t\t\t\t\theight={600}\r\n\t\t\t\t\t\t\t\t\twidth={400}\r\n\t\t\t\t\t\t\t\t\tspeed={1.2}\r\n\t\t\t\t\t\t\t\t\tprimaryColor=\"#f3f3f3\"\r\n\t\t\t\t\t\t\t\t\tsecondaryColor=\"#ecebeb\"\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t<rect x=\"0\" y=\"0\" rx=\"0\" ry=\"0\" width=\"75\" height=\"22\" />\r\n\t\t\t\t\t\t\t\t\t<rect x=\"0\" y=\"30\" rx=\"0\" ry=\"0\" width=\"350\" height=\"18\" />\r\n\t\t\t\t\t\t\t\t\t<rect x=\"0\" y=\"60\" rx=\"0\" ry=\"0\" width=\"300\" height=\"18\" />\r\n\t\t\t\t\t\t\t\t\t<rect x=\"0\" y=\"90\" rx=\"0\" ry=\"0\" width=\"100\" height=\"18\" />\r\n\r\n\t\t\t\t\t\t\t\t\t<rect x=\"0\" y={0 + 170} rx=\"0\" ry=\"0\" width=\"75\" height=\"22\" />\r\n\t\t\t\t\t\t\t\t\t<rect x=\"0\" y={30 + 170} rx=\"0\" ry=\"0\" width=\"350\" height=\"18\" />\r\n\t\t\t\t\t\t\t\t\t<rect x=\"0\" y={60 + 170} rx=\"0\" ry=\"0\" width=\"300\" height=\"18\" />\r\n\t\t\t\t\t\t\t\t\t<rect x=\"0\" y={90 + 170} rx=\"0\" ry=\"0\" width=\"100\" height=\"18\" />\r\n\r\n\t\t\t\t\t\t\t\t\t<rect x=\"0\" y={0 + 340} rx=\"0\" ry=\"0\" width=\"75\" height=\"22\" />\r\n\t\t\t\t\t\t\t\t\t<rect x=\"0\" y={30 + 340} rx=\"0\" ry=\"0\" width=\"350\" height=\"18\" />\r\n\t\t\t\t\t\t\t\t\t<rect x=\"0\" y={60 + 340} rx=\"0\" ry=\"0\" width=\"300\" height=\"18\" />\r\n\t\t\t\t\t\t\t\t\t<rect x=\"0\" y={90 + 340} rx=\"0\" ry=\"0\" width=\"100\" height=\"18\" />\r\n\t\t\t\t\t\t\t\t</ContentLoader>\r\n\t\t\t\t\t\t\t)}\r\n\r\n\t\t\t\t\t\t\t{addresses.length ? (\r\n\t\t\t\t\t\t\t\taddresses.map((address) => (\r\n\t\t\t\t\t\t\t\t\t<AddressList\r\n\t\t\t\t\t\t\t\t\t\thandleDeleteAddress={this.handleDeleteAddress}\r\n\t\t\t\t\t\t\t\t\t\tdeleteButton={true}\r\n\t\t\t\t\t\t\t\t\t\tkey={address.id}\r\n\t\t\t\t\t\t\t\t\t\taddress={address}\r\n\t\t\t\t\t\t\t\t\t\tuser={user}\r\n\t\t\t\t\t\t\t\t\t\tfromCartPage={this.state.restaurant_id === null ? false : true}\r\n\t\t\t\t\t\t\t\t\t\thandleSetDefaultAddress={this.handleSetDefaultAddress}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t))\r\n\t\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t\t<div className=\"text-center mt-50 font-w600 text-muted\">\r\n\t\t\t\t\t\t\t\t\t{localStorage.getItem(\"noAddressText\")}\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<DelayLink\r\n\t\t\t\t\t\t\tto=\"/search-location\"\r\n\t\t\t\t\t\t\tclassName=\"btn-new-address\"\r\n\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\tbackgroundColor: localStorage.getItem(\"storeColor\"),\r\n\t\t\t\t\t\t\t\tzIndex: \"2\",\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t{localStorage.getItem(\"buttonNewAddress\")}\r\n\t\t\t\t\t\t\t<Ink duration={200} />\r\n\t\t\t\t\t\t</DelayLink>\r\n\t\t\t\t\t</React.Fragment>\r\n\t\t\t\t)}\r\n\t\t\t</React.Fragment>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nconst mapStateToProps = (state) => ({\r\n\tuser: state.user.user,\r\n\taddresses: state.addresses.addresses,\r\n});\r\n\r\nexport default connect(\r\n\tmapStateToProps,\r\n\t{\r\n\t\tgetAddresses,\r\n\t\tsaveAddress,\r\n\t\tdeleteAddress,\r\n\t\tupdateUserInfo,\r\n\t\tsetDefaultAddress,\r\n\t}\r\n)(Addresses);\r\n"]},"metadata":{},"sourceType":"module"}