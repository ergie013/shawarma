{"ast":null,"code":"import _classCallCheck from \"/opt/lampp/htdocs/shawarma/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/opt/lampp/htdocs/shawarma/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/opt/lampp/htdocs/shawarma/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/opt/lampp/htdocs/shawarma/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/opt/lampp/htdocs/shawarma/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/opt/lampp/htdocs/shawarma/src/components/Delivery/ShareLiveLocation/index.js\";\nimport React, { Component } from \"react\";\nimport { connect } from \"react-redux\";\nimport { sendDeliveryGuyGpsLocation } from \"../../../services/Delivery/gpslocation/actions\";\n\nvar ShareLiveLocation =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(ShareLiveLocation, _Component);\n\n  function ShareLiveLocation() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, ShareLiveLocation);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(ShareLiveLocation)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      gpsAccessError: false,\n      lat: null,\n      lng: null\n    };\n\n    _this.__sendGpsLocation = function (position) {\n      _this.props.sendDeliveryGuyGpsLocation(_this.props.delivery_user.data.auth_token, _this.props.delivery_user.data.id, position.coords.latitude, position.coords.longitude, position.coords.heading);\n    };\n\n    return _this;\n  }\n\n  _createClass(ShareLiveLocation, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      var location = navigator && navigator.geolocation;\n\n      if (location) {\n        this.refreshSetInterval = setInterval(function () {\n          location.getCurrentPosition(function (position) {\n            _this2.__sendGpsLocation(position);\n          }, function (error) {\n            console.log(\"Inside error\");\n            console.log(error);\n\n            _this2.setState({\n              gpsAccessError: true\n            });\n          }, {\n            enableHighAccuracy: true\n          });\n        }, 15000);\n      }\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      clearInterval(this.refreshSetInterval);\n      console.log(\"Cleared API CALL\");\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React.createElement(React.Fragment, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 51\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"pt-50\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 52\n        },\n        __self: this\n      }, this.state.gpsAccessError && React.createElement(\"div\", {\n        className: \"auth-error location-error\",\n        style: {\n          bottom: \"5rem\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 54\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"error-shake\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 55\n        },\n        __self: this\n      }, localStorage.getItem(\"allowLocationAccessMessage\")))));\n    }\n  }]);\n\n  return ShareLiveLocation;\n}(Component);\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    delivery_user: state.delivery_user.delivery_user\n  };\n};\n\nexport default connect(mapStateToProps, {\n  sendDeliveryGuyGpsLocation: sendDeliveryGuyGpsLocation\n})(ShareLiveLocation);","map":{"version":3,"sources":["/opt/lampp/htdocs/shawarma/src/components/Delivery/ShareLiveLocation/index.js"],"names":["React","Component","connect","sendDeliveryGuyGpsLocation","ShareLiveLocation","state","gpsAccessError","lat","lng","__sendGpsLocation","position","props","delivery_user","data","auth_token","id","coords","latitude","longitude","heading","location","navigator","geolocation","refreshSetInterval","setInterval","getCurrentPosition","error","console","log","setState","enableHighAccuracy","clearInterval","bottom","localStorage","getItem","mapStateToProps"],"mappings":";;;;;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AAEA,SAASC,OAAT,QAAwB,aAAxB;AACA,SAASC,0BAAT,QAA2C,gDAA3C;;IAEMC,iB;;;;;;;;;;;;;;;;;UACLC,K,GAAQ;AACPC,MAAAA,cAAc,EAAE,KADT;AAEPC,MAAAA,GAAG,EAAE,IAFE;AAGPC,MAAAA,GAAG,EAAE;AAHE,K;;UA4BRC,iB,GAAoB,UAACC,QAAD,EAAc;AACjC,YAAKC,KAAL,CAAWR,0BAAX,CACC,MAAKQ,KAAL,CAAWC,aAAX,CAAyBC,IAAzB,CAA8BC,UAD/B,EAEC,MAAKH,KAAL,CAAWC,aAAX,CAAyBC,IAAzB,CAA8BE,EAF/B,EAGCL,QAAQ,CAACM,MAAT,CAAgBC,QAHjB,EAICP,QAAQ,CAACM,MAAT,CAAgBE,SAJjB,EAKCR,QAAQ,CAACM,MAAT,CAAgBG,OALjB;AAOA,K;;;;;;;wCA9BmB;AAAA;;AACnB,UAAMC,QAAQ,GAAGC,SAAS,IAAIA,SAAS,CAACC,WAAxC;;AAEA,UAAIF,QAAJ,EAAc;AACb,aAAKG,kBAAL,GAA0BC,WAAW,CAAC,YAAM;AAC3CJ,UAAAA,QAAQ,CAACK,kBAAT,CACC,UAACf,QAAD,EAAc;AACb,YAAA,MAAI,CAACD,iBAAL,CAAuBC,QAAvB;AACA,WAHF,EAIC,UAACgB,KAAD,EAAW;AACVC,YAAAA,OAAO,CAACC,GAAR,CAAY,cAAZ;AACAD,YAAAA,OAAO,CAACC,GAAR,CAAYF,KAAZ;;AACA,YAAA,MAAI,CAACG,QAAL,CAAc;AAAEvB,cAAAA,cAAc,EAAE;AAAlB,aAAd;AACA,WARF,EASC;AACCwB,YAAAA,kBAAkB,EAAE;AADrB,WATD;AAaA,SAdoC,EAclC,KAdkC,CAArC;AAeA;AACD;;;2CAYsB;AACtBC,MAAAA,aAAa,CAAC,KAAKR,kBAAN,CAAb;AACAI,MAAAA,OAAO,CAACC,GAAR,CAAY,kBAAZ;AACA;;;6BACQ;AACR,aACC,oBAAC,KAAD,CAAO,QAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACC;AAAK,QAAA,SAAS,EAAC,OAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,KAAKvB,KAAL,CAAWC,cAAX,IACA;AAAK,QAAA,SAAS,EAAC,2BAAf;AAA2C,QAAA,KAAK,EAAE;AAAE0B,UAAAA,MAAM,EAAE;AAAV,SAAlD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACC;AAAK,QAAA,SAAS,EAAC,aAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAA8BC,YAAY,CAACC,OAAb,CAAqB,4BAArB,CAA9B,CADD,CAFF,CADD,CADD;AAWA;;;;EAvD8BjC,S;;AA0DhC,IAAMkC,eAAe,GAAG,SAAlBA,eAAkB,CAAC9B,KAAD;AAAA,SAAY;AACnCO,IAAAA,aAAa,EAAEP,KAAK,CAACO,aAAN,CAAoBA;AADA,GAAZ;AAAA,CAAxB;;AAIA,eAAeV,OAAO,CACrBiC,eADqB,EAErB;AAAEhC,EAAAA,0BAA0B,EAA1BA;AAAF,CAFqB,CAAP,CAGbC,iBAHa,CAAf","sourcesContent":["import React, { Component } from \"react\";\r\n\r\nimport { connect } from \"react-redux\";\r\nimport { sendDeliveryGuyGpsLocation } from \"../../../services/Delivery/gpslocation/actions\";\r\n\r\nclass ShareLiveLocation extends Component {\r\n\tstate = {\r\n\t\tgpsAccessError: false,\r\n\t\tlat: null,\r\n\t\tlng: null,\r\n\t};\r\n\r\n\tcomponentDidMount() {\r\n\t\tconst location = navigator && navigator.geolocation;\r\n\r\n\t\tif (location) {\r\n\t\t\tthis.refreshSetInterval = setInterval(() => {\r\n\t\t\t\tlocation.getCurrentPosition(\r\n\t\t\t\t\t(position) => {\r\n\t\t\t\t\t\tthis.__sendGpsLocation(position);\r\n\t\t\t\t\t},\r\n\t\t\t\t\t(error) => {\r\n\t\t\t\t\t\tconsole.log(\"Inside error\");\r\n\t\t\t\t\t\tconsole.log(error);\r\n\t\t\t\t\t\tthis.setState({ gpsAccessError: true });\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tenableHighAccuracy: true,\r\n\t\t\t\t\t}\r\n\t\t\t\t);\r\n\t\t\t}, 15000);\r\n\t\t}\r\n\t}\r\n\r\n\t__sendGpsLocation = (position) => {\r\n\t\tthis.props.sendDeliveryGuyGpsLocation(\r\n\t\t\tthis.props.delivery_user.data.auth_token,\r\n\t\t\tthis.props.delivery_user.data.id,\r\n\t\t\tposition.coords.latitude,\r\n\t\t\tposition.coords.longitude,\r\n\t\t\tposition.coords.heading\r\n\t\t);\r\n\t};\r\n\r\n\tcomponentWillUnmount() {\r\n\t\tclearInterval(this.refreshSetInterval);\r\n\t\tconsole.log(\"Cleared API CALL\");\r\n\t}\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<React.Fragment>\r\n\t\t\t\t<div className=\"pt-50\">\r\n\t\t\t\t\t{this.state.gpsAccessError && (\r\n\t\t\t\t\t\t<div className=\"auth-error location-error\" style={{ bottom: \"5rem\" }}>\r\n\t\t\t\t\t\t\t<div className=\"error-shake\">{localStorage.getItem(\"allowLocationAccessMessage\")}</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</div>\r\n\t\t\t</React.Fragment>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nconst mapStateToProps = (state) => ({\r\n\tdelivery_user: state.delivery_user.delivery_user,\r\n});\r\n\r\nexport default connect(\r\n\tmapStateToProps,\r\n\t{ sendDeliveryGuyGpsLocation }\r\n)(ShareLiveLocation);\r\n"]},"metadata":{},"sourceType":"module"}